{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///build/riot/index.js","webpack:///webpack/bootstrap cd6619bfc413fb2abef8","webpack:///external {\"commonjs\":\"riot\",\"commonjs2\":\"riot\",\"amd\":\"riot\",\"root\":\"riot\"}","webpack:///./src/riot/mixins/index.js","webpack:///./src/tools/arrays.js","webpack:///./src/core/dragndrop.js","webpack:///./src/core/strategies.js","webpack:///./src/core/defaults.js","webpack:///./src/riot/index.js","webpack:///./src/riot/components/index.js","webpack:///./src/riot/components/TreeView.tag","webpack:///./src/tools/trees.js","webpack:///./src/tools/strings.js","webpack:///./src/tools/mixin.js","webpack:///./src/tools/css.js","webpack:///./src/tools/printer.js","webpack:///./src/tools/objects.js","webpack:///./src/core/logic.js","webpack:///./src/riot/mixins/opts.js","webpack:///./src/riot/mixins/transition.js","webpack:///./src/riot/mixins/listener.js","webpack:///./src/riot/components/TreeViewNode.tag","webpack:///./src/riot/components/transitionDirective.js"],"names":["root","factory","exports","module","require","define","amd","a","i","this","__WEBPACK_EXTERNAL_MODULE_1__","modules","__webpack_require__","moduleId","installedModules","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","value","__WEBPACK_IMPORTED_MODULE_0__arrays__","__WEBPACK_IMPORTED_MODULE_1__trees__","__WEBPACK_IMPORTED_MODULE_2__strings__","__WEBPACK_IMPORTED_MODULE_3__mixin__","__WEBPACK_IMPORTED_MODULE_4__css__","__WEBPACK_IMPORTED_MODULE_5__printer__","__WEBPACK_IMPORTED_MODULE_6__objects__","_opts","keys","forEach","key","_transition","_listener","array","self","last","length","in","arr","otherCondition","filter","elt","indexOf","notIn","is","_ref","_ref$isIn","isIn","undefined","_ref$notIn","reduce","acc","curr","contains","element","allIn","every","__WEBPACK_IMPORTED_MODULE_0__logic__","__WEBPACK_IMPORTED_MODULE_1__strategies__","__WEBPACK_IMPORTED_MODULE_2__defaults__","__WEBPACK_IMPORTED_MODULE_3__dragndrop__","_toConsumableArray","Array","isArray","arr2","from","dragndrop","utils","nodeEvents","wrapEvents","__WEBPACK_IMPORTED_MODULE_0__tools__","_extends","assign","target","arguments","source","selection","model","cb","draggable","droppable","drag","item","event","inputs","dataTransfer","setData","JSON","stringify","guard","types","ancestors","prev","drop","updatedModel","category","e","adjustedTarget","concat","pluck","backup","bak","setTimeout","cancel","parse","paste","data","getData","filesystem","items","kind","files","webkitGetAsEntry","getAsFile","push","tickDragover","onDragStart","stopPropagation","onDrag","onDragOver","preventDefault","dropEffect","addClass","currentTarget","mixCss","requestAnimationFrame","onDragEnter","hasChildren","isAsync","hasClass","newVal","state","unfolded","set","onDragLeave","removeClass","onDrop","onDragEnd","onCancel","_this","onSelect","neighbours","outputs","selectionStrategies","clickStrategies","foldStrategies","_slicedToArray","sliceIterator","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","done","err","TypeError","singleSelect","multiSelect","alreadySelected","newSelection","visit","children","single","multiple","modifiers","control","meta","lastSelection","lastIndex","lastPivot","bind","shift","originIndex","slice","endIndex","_newSelection","_ref2","smaller","higher","deletions","_ref3","_ref4","additions","disabled","apply","_x","_x2","_x3","_x4","_ancestors","toString","unfold-on-selection","isSelected","newUnfolded","toggle-fold","opener-control","not-selected","no-child-selection","_this2","recurseCheck","node","some","max-depth","maxDepth","isNaN","parseInt","depth","defaults","labels","search.placeholder","css","TreeView","opener","selected","folded","async","loading","nodrop","dragover","search","strategies","click","fold","display","_","noOpener","tag2","opts","_tools","_core","_mixins","mixin","optsMixin","listenerMixin","eventType","callback","rootNode","onKey","autoMount","filtered","onSearch","evt","input","trim","tree","treeFilter","onselect","RootNode","update","t","prop","flatten","flattened","fifo","pop","map","filterFun","copy","recurse","list","finalMap","Map","childMap","size","add","parent","idx","visitor","child","string","str","match","RegExp","deepMix","_typeof","obj","constructor","one","two","mergeArrays","clone","classes","join","cname","HTMLElement","className","split","printer","debug","title","msg","logger","console","log","_defineProperty","writable","Error","shallowCompare","excludes","equals","fun","fullMap","_fun","_fun2","newProp","nestPrefix","prefix","transform","startsWith","substring","_possibleConstructorReturn","ReferenceError","_inherits","subClass","superClass","create","setPrototypeOf","__proto__","_classCallCheck","instance","Constructor","TreeNode","__WEBPACK_IMPORTED_MODULE_1__dragndrop__","__WEBPACK_IMPORTED_MODULE_2__strategies__","__WEBPACK_IMPORTED_MODULE_3__defaults__","_createClass","defineProperties","props","descriptor","protoProps","staticProps","Core","refresh","_Core","_temp","_ret","_len","args","_key","getPrototypeOf","isFolded","strats","searched","strat","isDisabled","disabledFun","isDraggable","isDroppable","ulCss","liCss","_css$classes2","pending","unwrapPromise","asyncFun","then","res","catch","Promise","reject","onClick","getDragEvents","result","_Core2","_temp2","_this3","_ret2","_len2","_key3","getModifierState","selectionStrategy","wrapDragNDrop","filterTree","argument","init","on","updateOpts","_originalOpts","transitionMixin","nodeTarget","transitionName","transition","origUnmount","unmount","mountTransition","classList","remove","unmountTransition","addEventListener","_ref$eventType","_ref$regulate","regulate","ticking","onEvent","window","document","removeEventListener","getModel","filteredmodel","has","getChildModel","childModel","sort","getChildFiltered","getAncestors","restoreCamelCase","rootEvents","_riot","_riot2","default","tag","updateKeys"],"mappings":"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","file":"./build/riot/index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"riot\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"riot\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"riot\")) : factory(root[\"riot\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"riot\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"riot\"], factory);\n\telse {\n\t\tvar a = typeof exports === 'object' ? factory(require(\"riot\")) : factory(root[\"riot\"]);\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 8);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__arrays__ = __webpack_require__(3);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"array\", function() { return __WEBPACK_IMPORTED_MODULE_0__arrays__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__trees__ = __webpack_require__(11);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"tree\", function() { return __WEBPACK_IMPORTED_MODULE_1__trees__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__strings__ = __webpack_require__(12);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"string\", function() { return __WEBPACK_IMPORTED_MODULE_2__strings__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__mixin__ = __webpack_require__(13);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"deepMix\", function() { return __WEBPACK_IMPORTED_MODULE_3__mixin__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__css__ = __webpack_require__(14);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"css\", function() { return __WEBPACK_IMPORTED_MODULE_4__css__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__printer__ = __webpack_require__(15);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"printer\", function() { return __WEBPACK_IMPORTED_MODULE_5__printer__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__objects__ = __webpack_require__(16);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"object\", function() { return __WEBPACK_IMPORTED_MODULE_6__objects__[\"a\"]; });\n\n\n\n\n\n\n\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _opts = __webpack_require__(18);\n\nObject.keys(_opts).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _opts[key];\n    }\n  });\n});\n\nvar _transition = __webpack_require__(19);\n\nObject.keys(_transition).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _transition[key];\n    }\n  });\n});\n\nvar _listener = __webpack_require__(20);\n\nObject.keys(_listener).forEach(function (key) {\n  if (key === \"default\" || key === \"__esModule\") return;\n  Object.defineProperty(exports, key, {\n    enumerable: true,\n    get: function get() {\n      return _listener[key];\n    }\n  });\n});\n\n/***/ }),\n/* 3 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return array; });\n\n\nvar array = function array(self) {\n    return {\n        last: function last() {\n            return self.length > 0 ? self[self.length - 1] : null;\n        },\n        \"in\": function _in(arr, otherCondition) {\n            return self.filter(function (elt) {\n                return arr.indexOf(elt) >= 0 && (!otherCondition || otherCondition(elt));\n            });\n        },\n        notIn: function notIn(arr, otherCondition) {\n            return self.filter(function (elt) {\n                return arr.indexOf(elt) < 0 && (!otherCondition || otherCondition(elt));\n            });\n        },\n        is: function is(_ref, otherCondition) {\n            var _ref$isIn = _ref.isIn,\n                isIn = _ref$isIn === undefined ? [] : _ref$isIn,\n                _ref$notIn = _ref.notIn,\n                notIn = _ref$notIn === undefined ? [] : _ref$notIn;\n            return self.filter(function (elt) {\n                return isIn.reduce(function (acc, curr) {\n                    return curr.indexOf(elt) >= 0 && acc;\n                }, true) && notIn.reduce(function (acc, curr) {\n                    return curr.indexOf(elt) < 0 && acc;\n                }, true) && (!otherCondition || otherCondition(elt));\n            });\n        },\n        contains: function contains(element) {\n            return self.indexOf(element) >= 0;\n        },\n        allIn: function allIn(arr) {\n            return self.every(function (elt) {\n                return arr.indexOf(elt) >= 0;\n            });\n        }\n    };\n};\n\n/***/ }),\n/* 4 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__logic__ = __webpack_require__(17);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"TreeNode\", function() { return __WEBPACK_IMPORTED_MODULE_0__logic__[\"b\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"RootNode\", function() { return __WEBPACK_IMPORTED_MODULE_0__logic__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__strategies__ = __webpack_require__(6);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"selectionStrategies\", function() { return __WEBPACK_IMPORTED_MODULE_1__strategies__[\"c\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"clickStrategies\", function() { return __WEBPACK_IMPORTED_MODULE_1__strategies__[\"a\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"foldStrategies\", function() { return __WEBPACK_IMPORTED_MODULE_1__strategies__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__defaults__ = __webpack_require__(7);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"defaults\", function() { return __WEBPACK_IMPORTED_MODULE_2__defaults__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__dragndrop__ = __webpack_require__(5);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"dragndrop\", function() { return __WEBPACK_IMPORTED_MODULE_3__dragndrop__[\"a\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"utils\", function() { return __WEBPACK_IMPORTED_MODULE_3__dragndrop__[\"c\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"nodeEvents\", function() { return __WEBPACK_IMPORTED_MODULE_3__dragndrop__[\"b\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"wrapEvents\", function() { return __WEBPACK_IMPORTED_MODULE_3__dragndrop__[\"d\"]; });\n\n\n\n\n\n/***/ }),\n/* 5 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return dragndrop; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return utils; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return nodeEvents; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return wrapEvents; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__tools__ = __webpack_require__(0);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\n\n// Drag and drop presets //\n\nvar dragndrop = {\n    // Moves the selection //\n    selection: function selection(model, cb) {\n        return {\n            draggable: true,\n            droppable: true,\n            drag: function drag(item, event, inputs) {\n                event.dataTransfer && event.dataTransfer.setData(\"application/json\", JSON.stringify(inputs.selection));\n            },\n            guard: function guard(target, event, inputs) {\n                // Other data types\n                if (event && event.dataTransfer && event.dataTransfer.types.indexOf(\"application/json\") < 0) return false;\n                // Prevent drop on self\n                var selfDrop = function selfDrop() {\n                    return target && Object(__WEBPACK_IMPORTED_MODULE_0__tools__[\"array\"])(inputs.selection).contains(target);\n                };\n                // Prevent drop on child\n                var childDrop = function childDrop() {\n                    return inputs.ancestors && inputs.ancestors.reduce(function (prev, curr) {\n                        return prev || Object(__WEBPACK_IMPORTED_MODULE_0__tools__[\"array\"])(inputs.selection).contains(curr);\n                    }, false);\n                };\n\n                return selfDrop() || childDrop();\n            },\n            drop: function drop(target, event, inputs) {\n                var updatedModel = Object(__WEBPACK_IMPORTED_MODULE_0__tools__[\"tree\"])(model(), inputs.category).filter(function (e) {\n                    return inputs.selection.indexOf(e) < 0;\n                });\n                var adjustedTarget = target ? target[inputs.category] && target[inputs.category] instanceof Array ? target : Object(__WEBPACK_IMPORTED_MODULE_0__tools__[\"array\"])(inputs.ancestors).last() : null;\n                if (adjustedTarget) adjustedTarget[inputs.category] = [].concat(_toConsumableArray(adjustedTarget[inputs.category]), _toConsumableArray(inputs.selection));else updatedModel = [].concat(_toConsumableArray(updatedModel), _toConsumableArray(inputs.selection));\n                cb(updatedModel);\n            }\n        };\n    },\n    // Plucks an item on drag\n    pluck: function pluck(model, cb) {\n        return {\n            draggable: true,\n            backup: [],\n            drag: function drag(item, event, inputs) {\n                bak = JSON.stringify(model());\n                event.dataTransfer && event.dataTransfer.setData(\"application/json\", JSON.stringify(item));\n                setTimeout(function () {\n                    return cb(Object(__WEBPACK_IMPORTED_MODULE_0__tools__[\"tree\"])(model(), inputs.category).filter(function (e) {\n                        return e !== item;\n                    }));\n                }, 20);\n            },\n            cancel: function cancel() {\n                cb(JSON.parse(bak));\n            }\n        };\n    },\n    // Pastes item(s) on drop\n    paste: function paste(model, cb) {\n        return {\n            droppable: true,\n            drop: function drop(target, event, inputs) {\n                if (event.dataTransfer && event.dataTransfer.types.indexOf(\"application/json\") > -1) {\n                    var data = JSON.parse(event.dataTransfer.getData(\"application/json\"));\n                    var updatedModel = [].concat(_toConsumableArray(model()));\n                    var adjustedTarget = target ? target[inputs.category] && target[inputs.category] instanceof Array ? target : Object(__WEBPACK_IMPORTED_MODULE_0__tools__[\"array\"])(inputs.ancestors).last() : null;\n                    if (adjustedTarget) adjustedTarget[inputs.category] = [].concat(_toConsumableArray(adjustedTarget[inputs.category]), [data]);else updatedModel = [].concat(_toConsumableArray(updatedModel), [data]);\n                    cb(updatedModel);\n                }\n            }\n        };\n    }\n};\nvar bak = \"[]\";\n\n// Utils\n\nvar utils = {\n    // Returns a list of local files/folders dropped\n    filesystem: function filesystem(event) {\n        var items = event.dataTransfer ? event.dataTransfer.items : null;\n        if (items && items.length > 0 && items[0].kind === \"file\") {\n            var files = [];\n            for (var i = 0; i < items.length; i++) {\n                /* eslint-disable */\n                var item = items[i].webkitGetAsEntry() || items[i].getAsFile();\n                /* eslint-enable */\n                if (item) {\n                    files.push(item);\n                }\n            }\n            return files;\n        }\n        return null;\n    }\n\n    // Internal use //\n\n};var tickDragover = false;\nvar nodeEvents = {\n    onDragStart: function onDragStart(item) {\n        return function (event) {\n            event.stopPropagation();\n            this.inputs.get().dragndrop.onDrag(item, event, this.inputs.get());\n        };\n    },\n    onDragOver: function onDragOver(item) {\n        return function (event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            if (tickDragover) return;\n            tickDragover = true;\n\n            if (this.inputs.get().dragndrop.guard && this.inputs.get().dragndrop.guard(item, event, this.inputs.get())) {\n                event.dataTransfer && (event.dataTransfer.dropEffect = \"none\");\n                __WEBPACK_IMPORTED_MODULE_0__tools__[\"css\"].addClass(event.currentTarget, this.mixCss(\"nodrop\"));\n            } else {\n                __WEBPACK_IMPORTED_MODULE_0__tools__[\"css\"].addClass(event.currentTarget, this.mixCss(\"dragover\"));\n            }\n\n            requestAnimationFrame(function () {\n                tickDragover = false;\n            });\n        };\n    },\n    onDragEnter: function onDragEnter(item) {\n        return function (event) {\n            event.preventDefault();\n            event.stopPropagation();\n            // If dragging over an opener\n            if (item && (this.hasChildren(item) || this.isAsync(item)) && __WEBPACK_IMPORTED_MODULE_0__tools__[\"css\"].hasClass(event.target, this.mixCss(\"opener\"))) {\n                var newVal = this.state.get().unfolded.filter(function (i) {\n                    return i !== item;\n                });\n                newVal.push(item);\n                this.state.set({ unfolded: newVal });\n            }\n        };\n    },\n    onDragLeave: function onDragLeave(event) {\n        event.stopPropagation();\n        __WEBPACK_IMPORTED_MODULE_0__tools__[\"css\"].removeClass(event.currentTarget, this.mixCss(\"dragover\"));\n        __WEBPACK_IMPORTED_MODULE_0__tools__[\"css\"].removeClass(event.currentTarget, this.mixCss(\"nodrop\"));\n    },\n    onDrop: function onDrop(item) {\n        return function (event) {\n            event.stopPropagation();\n            __WEBPACK_IMPORTED_MODULE_0__tools__[\"css\"].removeClass(event.currentTarget, this.mixCss(\"dragover\"));\n            __WEBPACK_IMPORTED_MODULE_0__tools__[\"css\"].removeClass(event.currentTarget, this.mixCss(\"nodrop\"));\n            this.inputs.get().dragndrop.onDrop(item, event, this.inputs.get());\n        };\n    },\n    onDragEnd: function onDragEnd(item) {\n        return function (event) {\n            event.stopPropagation();\n            if (event.dataTransfer && event.dataTransfer.dropEffect === \"none\") this.inputs.get().dragndrop.onCancel(item, event, this.inputs.get());\n        };\n    }\n};\n\nvar wrapEvents = function wrapEvents() {\n    var _this = this;\n\n    return _extends({}, this.inputs.get().dragndrop, {\n        onDrag: function onDrag(target, event, inputs) {\n            if (!Object(__WEBPACK_IMPORTED_MODULE_0__tools__[\"array\"])(_this.inputs.get().selection).contains(target)) {\n                _this.onSelect(target, inputs.ancestors, inputs.neighbours);\n            }\n\n            _this.outputs.onDrag && _this.outputs.onDrag(target, event, inputs);\n        },\n        onDrop: function onDrop(target, event, inputs) {\n            event.preventDefault();\n            _this.outputs.onDrop && _this.outputs.onDrop(target, event, inputs);\n        },\n        onCancel: function onCancel(target, event, inputs) {\n            event.preventDefault();\n            if (event.dataTransfer && event.dataTransfer.dropEffect === \"none\") _this.outputs.onCancel && _this.outputs.onCancel(target, event, inputs);\n        }\n    });\n};\n\n/***/ }),\n/* 6 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return selectionStrategies; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return clickStrategies; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return foldStrategies; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__tools__ = __webpack_require__(0);\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\n\nvar singleSelect = function singleSelect(item, selection, neighbours, ancestors) {\n    return Object(__WEBPACK_IMPORTED_MODULE_0__tools__[\"array\"])(selection).contains(item) ? [] : [item];\n};\nvar multiSelect = function multiSelect(item, selection, neighbours, ancestors) {\n    var alreadySelected = false;\n    var newSelection = selection.filter(function (i) {\n        // Mark if the item was already selected\n        if (!alreadySelected) alreadySelected = i === item;\n        // Deselect all ancestors\n        return i !== item && ancestors.indexOf(i) < 0;\n    });\n    // Categories : deselect all children\n    if (!alreadySelected && item[this.inputs.get().category] && item[this.inputs.get().category] instanceof Array) {\n        Object(__WEBPACK_IMPORTED_MODULE_0__tools__[\"tree\"])(item[this.inputs.get().category], this.inputs.get().category).visit(function (children) {\n            newSelection = Object(__WEBPACK_IMPORTED_MODULE_0__tools__[\"array\"])(newSelection).notIn(children);\n        });\n    }\n    if (!alreadySelected) newSelection.push(item);\n    return newSelection;\n};\n\n// Selection strategies are triggered when the selection is updated.\nvar selectionStrategies = {\n    // The single strategy allows only one selected item at the same time (usually the last item clicked).\n    single: singleSelect,\n    // The multiple strategy allows any number of selected items and will add the last item clicked to the selection list.\n    multiple: multiSelect,\n    /*\n    The modifiers strategy is the way most file explorers behave.\n    Without keyboard modifiers, only one selected item is allowed.\n    While pressing the shift key, all items between the two last selected siblings are added to the selection array.\n    While pressing the ctrl (or cmd for mac users) key, the item is added to the selection list.\n     */\n    modifiers: function modifiers(item, selection, neighbours, ancestors) {\n        var _this = this;\n\n        if (this.modifiers.control || this.modifiers.meta) {\n            this.lastSelection = item;\n            delete this.lastIndex;\n            delete this.lastPivot;\n            return multiSelect.bind(this)(item, selection, neighbours, ancestors);\n        } else if (this.modifiers.shift) {\n            if (!this.lastSelection) return selection;\n\n            var originIndex = neighbours.indexOf(this.lastSelection);\n            if (originIndex < 0) return selection;\n\n            var newSelection = selection.slice();\n            var endIndex = neighbours.indexOf(item);\n\n            if (originIndex >= 0) {\n                var _newSelection;\n\n                if (this.lastPivot) {\n                    var lastIndex = neighbours.indexOf(this.lastPivot);\n\n                    var _ref = originIndex > lastIndex ? [lastIndex, originIndex] : [originIndex, lastIndex],\n                        _ref2 = _slicedToArray(_ref, 2),\n                        _smaller = _ref2[0],\n                        _higher = _ref2[1];\n\n                    var deletions = neighbours.slice(_smaller, _higher + 1);\n                    newSelection = Object(__WEBPACK_IMPORTED_MODULE_0__tools__[\"array\"])(newSelection).notIn(deletions);\n                }\n                this.lastPivot = item;\n\n                var _ref3 = originIndex > endIndex ? [endIndex, originIndex] : [originIndex, endIndex],\n                    _ref4 = _slicedToArray(_ref3, 2),\n                    smaller = _ref4[0],\n                    higher = _ref4[1];\n\n                var additions = !this.inputs.get().disabled ? neighbours.slice(smaller, higher + 1) : neighbours.slice(smaller, higher + 1).filter(function (i) {\n                    return !_this.inputs.get().disabled(i);\n                });\n                newSelection = Object(__WEBPACK_IMPORTED_MODULE_0__tools__[\"array\"])(newSelection).notIn(additions);\n                (_newSelection = newSelection).push.apply(_newSelection, _toConsumableArray(additions));\n            }\n\n            return newSelection;\n        } else {\n            this.lastSelection = item;\n            delete this.lastIndex;\n            delete this.lastPivot;\n            return singleSelect.bind(this)(item, selection.length > 1 ? [] : selection, neighbours, ancestors);\n        }\n    },\n    // Selects an item and its ancestors.\n    ancestors: function (_ancestors) {\n        function ancestors(_x, _x2, _x3, _x4) {\n            return _ancestors.apply(this, arguments);\n        }\n\n        ancestors.toString = function () {\n            return _ancestors.toString();\n        };\n\n        return ancestors;\n    }(function (item, selection, neighbours, ancestors) {\n        return selection.length === 0 ? [item] : Object(__WEBPACK_IMPORTED_MODULE_0__tools__[\"array\"])(selection).contains(item) ? [].concat(_toConsumableArray(ancestors)) : [].concat(_toConsumableArray(ancestors), [item]);\n    })\n\n    // Click strategies are triggered on item click\n};var clickStrategies = {\n    // Unfold an item when selecting it. Pair it with the \"opener-control\" fold strategy.\n    \"unfold-on-selection\": function unfoldOnSelection(item) {\n        if (!this.isSelected(item)) {\n            var newUnfolded = this.state.get().unfolded.filter(function (i) {\n                return i !== item;\n            });\n            newUnfolded.push(item);\n            this.state.set({ unfolded: newUnfolded });\n        }\n    },\n    // Toggle fold/unfold. Pair it with the \"opener-control\" fold strategy.\n    \"toggle-fold\": function toggleFold(item) {\n        var newUnfolded = this.state.get().unfolded.filter(function (i) {\n            return i !== item;\n        });\n        if (newUnfolded.length === this.state.get().unfolded.length) {\n            newUnfolded.push(item);\n        }\n        this.state.set({ unfolded: newUnfolded });\n    }\n\n    // Fold strategies determine if an item will be folded or not, meaning if its children are hidden.\n};var foldStrategies = {\n    // Allow the opener (usually an arrow-like element) to control the fold state.\n    \"opener-control\": function openerControl(item) {\n        return !Object(__WEBPACK_IMPORTED_MODULE_0__tools__[\"array\"])(this.state.get().unfolded).contains(item);\n    },\n    // Fold when not selected.\n    \"not-selected\": function notSelected(item) {\n        return !this.isSelected(item);\n    },\n    // Unfold as long as there is at least one child selected.\n    \"no-child-selection\": function noChildSelection(item) {\n        var _this2 = this;\n\n        // naive algorithm ...\n        var recurseCheck = function recurseCheck(node) {\n            return _this2.isSelected(node) || node[_this2.inputs.get().category] && node[_this2.inputs.get().category] instanceof Array && node[_this2.inputs.get().category].some(recurseCheck);\n        };\n        return !recurseCheck(item);\n    },\n    // Fold every item deeper than then \"max-depth\" component property.\n    \"max-depth\": function maxDepth() {\n        return this.inputs.get().maxDepth && !isNaN(parseInt(this.inputs.get().maxDepth, 10)) ? this.inputs.get().depth >= parseInt(this.inputs.get().maxDepth, 10) : false;\n    }\n};\n\n/***/ }),\n/* 7 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return defaults; });\nvar defaults = {\n    labels: {\n        \"search.placeholder\": \"Search ...\"\n    },\n    css: {\n        TreeView: \"TreeView\",\n        opener: \"opener\",\n        depth: \"depth\",\n        selected: \"selected\",\n        category: \"category\",\n        folded: \"folded\",\n        disabled: \"disabled\",\n        async: \"async\",\n        loading: \"loading\",\n        nodrop: \"nodrop\",\n        dragover: \"dragover\",\n        search: \"search\",\n        item: \"item\"\n    },\n    strategies: {\n        selection: [\"single\"],\n        click: [],\n        fold: [\"not-selected\", \"no-child-selection\"]\n    },\n    display: function display(_) {\n        return _.toString();\n    },\n    async: function async(_) {\n        return _();\n    },\n    noOpener: false,\n    dragndrop: {\n        draggable: false,\n        droppable: false\n    }\n};\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(9);\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n__webpack_require__(10);\n\n__webpack_require__(21);\n\n__webpack_require__(22);\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    var riot = __webpack_require__(1)\n    riot.tag2('treeview', '<div class=\"{rootNode.mixCss(⁗TreeView⁗)}\"> <input type=\"search\" class=\"{rootNode.mixCss(⁗search⁗)}\" if=\"{inputs.get().search}\" placeholder=\"{inputs.get().labels[⁗search.placeholder⁗]}\" onkeyup=\"{onSearch}\"> <treeviewnode opts=\"{inputs.get()}\" model=\"{inputs.get().sort ? inputs.get().model.sort(inputs.get().sort) : inputs.get().model}\" filteredmodel=\"{filtered}\" onselect=\"{rootNode.onSelect}\" dragndrop=\"{rootNode.wrapDragNDrop()}\" ancestors=\"{[]}\" searched=\"{search.trim()}\" depth=\"{+⁗0⁗}\"> </TreeViewNode> </div>', '', '', function(opts) {\n\"use strict\";\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _this = this;\n\nvar _tools = __webpack_require__(0);\n\nvar _core = __webpack_require__(4);\n\nvar _mixins = __webpack_require__(2);\n\nthis.mixin((0, _mixins.optsMixin)());\nthis.mixin((0, _mixins.listenerMixin)({ eventType: \"keyup\", callback: function callback(e) {\n        return _this.rootNode.onKey(e);\n    }, autoMount: true }));\nthis.mixin((0, _mixins.listenerMixin)({ eventType: \"keydown\", callback: function callback(e) {\n        return _this.rootNode.onKey(e);\n    }, autoMount: true }));\n\n// Logic //\n\nthis.filtered = null;\nthis.search = \"\";\n\nthis.onSearch = function (evt) {\n    var input = evt.currentTarget.value;\n    _this.search = input;\n    _this.filtered = !input.trim() ? null : (0, _tools.tree)(_this.inputs.get().model, _this.inputs.get().category).treeFilter(_this.inputs.get().search(input.trim()));\n};\n\n// Boilerplate //\n\nthis.inputs = {\n    get: function get() {\n        return _extends({}, _core.defaults, _this.opts, {\n            onSelect: _this.opts.onselect\n        });\n    }\n};\nthis.outputs = {\n    onSelect: this.inputs.get().onselect,\n    onDrag: this.inputs.get().dragndrop && this.inputs.get().dragndrop.drag,\n    onDrop: this.inputs.get().dragndrop && this.inputs.get().dragndrop.drop,\n    onCancel: this.inputs.get().dragndrop && this.inputs.get().dragndrop.cancel\n};\nthis.state = {\n    get: function get() {\n        return _extends({}, _this);\n    },\n    set: function set(s) {\n        for (var key in s) {\n            if (key in _this) _this[key] = s[key];\n        }\n    }\n};\n\nthis.rootNode = new _core.RootNode(this.inputs, this.outputs, this.state, this.update);\n});\n\n    \n  \n\n/***/ }),\n/* 11 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return tree; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__arrays__ = __webpack_require__(3);\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\n\nvar tree = function tree(t, prop) {\n    return {\n        flatten: function flatten() {\n            var flattened = [];\n            var fifo = [t];\n            while (fifo.length > 0) {\n                var _tree = fifo.pop();\n                if (!(_tree instanceof Array)) continue;\n                flattened = [].concat(_toConsumableArray(Object(__WEBPACK_IMPORTED_MODULE_0__arrays__[\"a\" /* array */])(flattened).notIn(_tree)), _toConsumableArray(_tree));\n                fifo = [].concat(_toConsumableArray(fifo), _toConsumableArray(_tree.filter(function (item) {\n                    return item[prop];\n                }).map(function (item) {\n                    return item[prop];\n                })));\n            }\n\n            return flattened;\n        },\n        filter: function filter(filterFun) {\n            var copy = t.filter(filterFun);\n            var recurse = function recurse(list) {\n                list.forEach(function (item) {\n                    if (item[prop] && item[prop] instanceof Array) {\n                        item[prop] = item[prop].filter(filterFun);\n                        recurse(item[prop]);\n                    }\n                });\n            };\n            recurse(copy);\n            return copy;\n        },\n        treeFilter: function treeFilter(filterFun) {\n            var finalMap = new Map();\n\n            var recurse = function recurse(list, map) {\n                list.forEach(function (item) {\n                    if (item[prop] && item[prop] instanceof Array) {\n                        var childMap = new Map();\n                        recurse(item[prop], childMap);\n                        if (childMap.size > 0) {\n                            map.set(item, childMap);\n                        } else if (filterFun(item)) {\n                            map.set(item, new Map());\n                        }\n                    } else if (filterFun(item)) {\n                        map.set(item, null);\n                    }\n                });\n            };\n            recurse(t, finalMap);\n            return finalMap;\n        },\n        add: function add(parent, elt) {\n            var fifo = [t];\n            while (fifo.length > 0) {\n                var _tree2 = fifo.pop();\n                var idx = _tree2.indexOf(parent);\n                if (idx >= 0 && _tree2[idx][prop]) {\n                    _tree2[idx][prop] = _tree2[idx][prop].slice();\n                    _tree2[idx][prop].push(elt);\n                    return t;\n                }\n                fifo = [].concat(_toConsumableArray(fifo), _toConsumableArray(_tree2.filter(function (item) {\n                    return item[prop];\n                }).map(function (item) {\n                    return item[prop];\n                })));\n            }\n            return t;\n        },\n        visit: function visit(visitor) {\n            var fifo = [t];\n            while (fifo.length > 0) {\n                var _tree3 = fifo.pop();\n                visitor(_tree3);\n                _tree3.forEach(function (child) {\n                    return child[prop] && child[prop] instanceof Array ? fifo.push(child[prop]) : null;\n                });\n            }\n        }\n    };\n};\n\n/***/ }),\n/* 12 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return string; });\nvar string = function string(str) {\n    return {\n        contains: function contains(input) {\n            return !!str && !!str.match(new RegExp(\".*\" + input + \".*\", \"gi\"));\n        }\n    };\n};\n\n/***/ }),\n/* 13 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return deepMix; });\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar deepMix = function deepMix(one, two) {\n    var mergeArrays = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n    if (!one || !two || (typeof one === \"undefined\" ? \"undefined\" : _typeof(one)) !== \"object\" || (typeof two === \"undefined\" ? \"undefined\" : _typeof(two)) !== \"object\") return one;\n\n    var clone = _extends({}, one, two);\n    for (var prop in two) {\n        if (two.hasOwnProperty(prop)) {\n            if (two[prop] instanceof Array && one[prop] instanceof Array) {\n                clone[prop] = mergeArrays ? [].concat(_toConsumableArray(one[prop]), _toConsumableArray(two[prop])) : clone[prop] = two[prop];\n            } else if (_typeof(two[prop]) === \"object\" && _typeof(one[prop]) === \"object\") {\n                clone[prop] = deepMix(one[prop], two[prop], mergeArrays);\n            }\n        }\n    }\n\n    return clone;\n};\n\n/***/ }),\n/* 14 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return css; });\nvar css = {\n    classes: function classes(_classes) {\n        var css = [];\n        for (var _key in _classes) {\n            if (_classes[_key]) {\n                css.push(_key);\n            }\n        }\n        return css.join(\" \");\n    },\n    addClass: function addClass(elt, cname) {\n        if (elt instanceof HTMLElement) elt.className = elt.className.split(\" \").filter(function (c) {\n            return c !== cname;\n        }).join(\" \") + \" \" + cname;\n    },\n    removeClass: function removeClass(elt, cname) {\n        if (elt instanceof HTMLElement) elt.className = elt.className.split(\" \").filter(function (c) {\n            return c !== cname;\n        }).join(\" \");\n    },\n    hasClass: function hasClass(elt, cname) {\n        return elt instanceof HTMLElement ? elt.className.indexOf(cname) >= 0 : false;\n    }\n};\n\n\n/***/ }),\n/* 15 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return printer; });\nvar printer = {\n    debug: function debug(title, msg /* eslint-enable */) {\n        var logger = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : console.log;\n\n        var headerStyle = \"background-color: red; color: white; font-size: 1.1em; font-weight: bold; padding: 3px 10px; border-radius: 5px\";\n        var titleStyle = \"color: #444; font-weight: bold; font-size: 1.1em\";\n        var msgStyle = \"color: #222; font-weight: bold\";\n\n        logger(\"%cDEBUG%c \" + title, headerStyle, titleStyle);\n        logger(\"%c\" + msg, msgStyle);\n    }\n};\n\n/***/ }),\n/* 16 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return object; });\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar object = function object(self) {\n    if (!self || !(self instanceof Object)) {\n        throw new Error(\"Bad object format\");\n    }\n\n    return {\n        shallowCompare: function shallowCompare(obj, excludes) {\n            var equals = true;\n            for (var key in self) {\n                if (self.hasOwnProperty(key)) {\n                    if (!(excludes && excludes.indexOf(key) >= 0) && obj[key] !== self[key]) {\n                        equals = false;\n                        return;\n                    }\n                }\n            }\n            return equals;\n        },\n        filter: function filter(fun) {\n            var copy = {};\n            for (var prop in self) {\n                if (self.hasOwnProperty(prop) && fun(self[prop])) copy[prop] = self[prop];\n            }\n            return copy;\n        },\n        map: function map(fun) {\n            var copy = {};\n            for (var prop in self) {\n                if (self.hasOwnProperty(prop)) copy[prop] = fun(self[prop]);\n            }\n            return copy;\n        },\n        fullMap: function fullMap(fun) {\n            var copy = {};\n            for (var prop in self) {\n                if (self.hasOwnProperty(prop)) {\n                    var _fun = fun(prop, self[prop]),\n                        _fun2 = _slicedToArray(_fun, 2),\n                        newProp = _fun2[0],\n                        newVal = _fun2[1];\n\n                    copy[newProp] = newVal;\n                }\n            }\n            return copy;\n        },\n        nestPrefix: function nestPrefix(prefix) {\n            var transform = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : function (_) {\n                return _;\n            };\n\n            var copy = _defineProperty({}, prefix, {});\n            for (var prop in self) {\n                if (self.hasOwnProperty(prop) && prop.startsWith(prefix)) {\n                    copy[prefix][transform(prop.substring(prefix.length))] = self[prop];\n                } else {\n                    copy[prop] = self[prop];\n                }\n            }\n            return copy;\n        }\n    };\n};\n\n/***/ }),\n/* 17 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return TreeNode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RootNode; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__tools__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__dragndrop__ = __webpack_require__(5);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__strategies__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__defaults__ = __webpack_require__(7);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //\n//  Boilerplate  for framework class adapters\n\nvar Core = function Core(inputs, outputs, state, refresh) {\n    _classCallCheck(this, Core);\n\n    this.inputs = inputs;\n    this.outputs = outputs;\n    this.state = state;\n    this.refresh = refresh;\n};\n\n// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //\n// Tree node\n\nvar TreeNode = function (_Core) {\n    _inherits(TreeNode, _Core);\n\n    function TreeNode() {\n        var _ref;\n\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, TreeNode);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = TreeNode.__proto__ || Object.getPrototypeOf(TreeNode)).call.apply(_ref, [this].concat(args))), _this), _this.isSelected = function (item) {\n            return Object(__WEBPACK_IMPORTED_MODULE_0__tools__[\"array\"])(_this.inputs.get().selection).contains(item);\n        }, _this.isFolded = function (item) {\n            var strats = _this.inputs.get().strategies;\n            return (!_this.inputs.get().searched || _this.isAsync(item)) && (strats && strats.fold || []).map(function (strat) {\n                return (__WEBPACK_IMPORTED_MODULE_2__strategies__[\"b\" /* foldStrategies */][strat] || strat).bind(_this);\n            }).reduce(function (last, curr) {\n                return last && curr(item, last);\n            }, true);\n        }, _this.hasChildren = function (item) {\n            return item[_this.inputs.get().category] && item[_this.inputs.get().category] instanceof Array;\n        }, _this.isAsync = function (item) {\n            return !!item && [_this.inputs.get().category] && typeof item[_this.inputs.get().category] === \"function\";\n        }, _this.isDisabled = function (item) {\n            var disabledFun = _this.inputs.get().disabled;\n            return disabledFun ? disabledFun(item) : false;\n        }, _this.isDraggable = function (item) {\n            return item && _this.inputs.get().dragndrop.draggable && (typeof _this.inputs.get().dragndrop.draggable === \"function\" ? _this.inputs.get().dragndrop.draggable(item) : true);\n        }, _this.isDroppable = function (item) {\n            return _this.inputs.get().dragndrop.droppable && (typeof _this.inputs.get().dragndrop.droppable === \"function\" ? _this.inputs.get().dragndrop.droppable(item) : true);\n        }, _this.mixCss = function (prop) {\n            return _this.inputs.get().css[prop] || __WEBPACK_IMPORTED_MODULE_3__defaults__[\"a\" /* defaults */].css[prop];\n        }, _this.ulCss = function () {\n            return __WEBPACK_IMPORTED_MODULE_0__tools__[\"css\"].classes(_defineProperty({}, _this.mixCss(\"depth\") + \"-\" + (_this.inputs.get().depth || 0), true));\n        }, _this.liCss = function (item) {\n            var _css$classes2;\n\n            return __WEBPACK_IMPORTED_MODULE_0__tools__[\"css\"].classes((_css$classes2 = {}, _defineProperty(_css$classes2, _this.mixCss(\"selected\"), _this.isSelected(item)), _defineProperty(_css$classes2, _this.mixCss(\"category\"), _this.hasChildren(item) || _this.isAsync(item)), _defineProperty(_css$classes2, _this.mixCss(\"folded\"), _this.hasChildren(item) || _this.isAsync(item) ? _this.isFolded(item) : null), _defineProperty(_css$classes2, _this.mixCss(\"disabled\"), _this.isDisabled(item)), _defineProperty(_css$classes2, _this.mixCss(\"async\"), _this.isAsync(item) && _this.isFolded(item)), _defineProperty(_css$classes2, _this.mixCss(\"loading\"), _this.isAsync(item) && !_this.isFolded(item)), _css$classes2));\n        }, _this.pending = [], _this.unwrapPromise = function (item) {\n            _this.pending.push(item);\n            var asyncFun = _this.inputs.get().async;\n            if (!asyncFun) return Promise.reject(new Error(\"Missing async function.\"));else return asyncFun(item[_this.inputs.get().category]).then(function (res) {\n                item[_this.inputs.get().category] = res;\n                _this.refresh();\n            }).catch(function (err) {\n                /* eslint-disable */\n                throw err;\n                /* eslint-enable */\n            }).then(function () {\n                return _this.pending = _this.pending.filter(function (e) {\n                    return e !== item;\n                });\n            });\n        }, _this.onClick = function (item) {\n            return function (event) {\n                if (_this.isDisabled(item)) return;\n                var strats = _this.inputs.get().strategies;\n                (strats && strats.click || []).map(function (strat) {\n                    return (__WEBPACK_IMPORTED_MODULE_2__strategies__[\"a\" /* clickStrategies */][strat] || strat).bind(_this);\n                }).forEach(function (strat) {\n                    return strat(item, event, _this.inputs.get().ancestors, _this.inputs.get().model);\n                });\n                _this.inputs.get().onSelect(item, _this.inputs.get().ancestors, _this.inputs.get().model);\n                event.stopPropagation();\n            };\n        }, _this.getDragEvents = function (item) {\n            var condition = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n            if (!condition) return {};\n            var result = {\n                draggable: _this.isDraggable(item),\n                onDragStart: _this.isDraggable(item) && __WEBPACK_IMPORTED_MODULE_1__dragndrop__[\"b\" /* nodeEvents */].onDragStart(item).bind(_this),\n                onDragOver: _this.isDroppable(item) && __WEBPACK_IMPORTED_MODULE_1__dragndrop__[\"b\" /* nodeEvents */].onDragOver(item).bind(_this),\n                onDragEnter: _this.isDroppable(item) && __WEBPACK_IMPORTED_MODULE_1__dragndrop__[\"b\" /* nodeEvents */].onDragEnter(item).bind(_this),\n                onDragLeave: _this.isDroppable(item) && __WEBPACK_IMPORTED_MODULE_1__dragndrop__[\"b\" /* nodeEvents */].onDragLeave.bind(_this),\n                onDrop: _this.isDroppable(item) && __WEBPACK_IMPORTED_MODULE_1__dragndrop__[\"b\" /* nodeEvents */].onDrop(item).bind(_this),\n                onDragEnd: _this.isDraggable(item) && __WEBPACK_IMPORTED_MODULE_1__dragndrop__[\"b\" /* nodeEvents */].onDragEnd(item).bind(_this)\n            };\n            for (var _key2 in result) {\n                if (!result[_key2]) delete result[_key2];\n            }return result;\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    /* Various checks */\n\n    /* Styles calculation */\n\n    // Css mixin helper\n\n\n    /* Promises */\n\n    // Pending promises\n\n\n    // Unwrap a promise and mutate the model to add the results\n\n\n    /* Events */\n\n    // On item click\n\n\n    _createClass(TreeNode, [{\n        key: \"onOpener\",\n\n\n        // On opener click\n        value: function onOpener(item) {\n            var _this2 = this;\n\n            return function (event) {\n                var newVal = _this2.state.get().unfolded.filter(function (i) {\n                    return i !== item;\n                });\n                if (newVal.length === _this2.state.get().unfolded.length) newVal.push(item);\n                _this2.state.set({ unfolded: newVal });\n                event.stopPropagation();\n            };\n        }\n\n        // Drag'n'drop //\n\n    }]);\n\n    return TreeNode;\n}(Core);\n\n// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //\n// Root node of the tree\n\nvar RootNode = function (_Core2) {\n    _inherits(RootNode, _Core2);\n\n    function RootNode() {\n        var _ref2;\n\n        var _temp2, _this3, _ret2;\n\n        _classCallCheck(this, RootNode);\n\n        for (var _len2 = arguments.length, args = Array(_len2), _key3 = 0; _key3 < _len2; _key3++) {\n            args[_key3] = arguments[_key3];\n        }\n\n        return _ret2 = (_temp2 = (_this3 = _possibleConstructorReturn(this, (_ref2 = RootNode.__proto__ || Object.getPrototypeOf(RootNode)).call.apply(_ref2, [this].concat(args))), _this3), _this3.modifiers = {}, _this3.onKey = function (event) {\n            _this3.modifiers = {\n                control: event.getModifierState(\"Control\"),\n                meta: event.getModifierState(\"Meta\"),\n                shift: event.getModifierState(\"Shift\")\n            };\n        }, _this3.onSelect = function (item, ancestors, neighbours) {\n            var selectionStrategy = _this3.inputs.get().strategies.selection || [];\n            var newSelection = selectionStrategy.map(function (strat) {\n                return (__WEBPACK_IMPORTED_MODULE_2__strategies__[\"c\" /* selectionStrategies */][strat] || strat).bind(_this3);\n            }).reduce(function (last, curr) {\n                return curr(item, last, neighbours, ancestors);\n            }, _this3.inputs.get().selection);\n            _this3.outputs.onSelect(newSelection, item, ancestors, neighbours);\n            return newSelection;\n        }, _this3.wrapDragNDrop = __WEBPACK_IMPORTED_MODULE_1__dragndrop__[\"d\" /* wrapEvents */].bind(_this3), _this3.mixCss = function (prop) {\n            return _this3.inputs.get().css[prop] || __WEBPACK_IMPORTED_MODULE_3__defaults__[\"a\" /* defaults */].css[prop];\n        }, _this3.filterTree = function (input) {\n            var search = _this3.inputs.get().search;\n            return !search ? null : !input.trim() ? null : Object(__WEBPACK_IMPORTED_MODULE_0__tools__[\"tree\"])(_this3.inputs.get().model, _this3.inputs.get().category).treeFilter(search(input.trim()));\n        }, _temp2), _possibleConstructorReturn(_this3, _ret2);\n    }\n\n    /* Events */\n\n    // Keyboard modifiers list\n\n\n    // When new element(s) are selected\n\n\n    // Framework input wrapper\n\n\n    // Css mixin helper\n\n\n    // Used to filter the tree when performing a search\n\n\n    return RootNode;\n}(Core);\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar optsMixin = exports.optsMixin = function optsMixin() {\n    var argument = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : \"opts\";\n    return {\n        init: function init() {\n            this.on(\"update\", this.updateOpts);\n            this._originalOpts = Object.keys(this.opts);\n            this.updateOpts();\n        },\n        updateOpts: function updateOpts() {\n            if (!this.opts) return;\n            for (var key in this.opts[argument]) {\n                if (!~this._originalOpts.indexOf(key)) this.opts[key] = this.opts[argument][key];\n            }\n        }\n    };\n};\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar transitionMixin = exports.transitionMixin = function transitionMixin(nodeTarget) {\n    return {\n        init: function init() {\n            var _this = this;\n\n            if (!(\"transition\" in this.opts)) return;\n            var transitionName = this.opts.transition.name;\n            var origUnmount = this.unmount;\n\n            var mountTransition = function mountTransition() {\n                var target = (nodeTarget || function () {\n                    return _this.root;\n                })();\n                if (!target) return;\n\n                target.classList.add(transitionName);\n                target.classList.add(transitionName + \"-mount\");\n                setTimeout(function () {\n                    target.classList.remove(transitionName + \"-mount\");\n                }, 10);\n            };\n\n            var guard = false;\n            var unmountTransition = function unmountTransition() {\n                if (guard) return;\n                guard = true;\n                var target = (nodeTarget || function () {\n                    return _this.root;\n                })();\n                if (!target) return origUnmount.call(_this);\n\n                target.addEventListener(\"transitionend\", function () {\n                    origUnmount.call(_this);\n                });\n                target.classList.add(transitionName + \"-unmount\");\n            };\n\n            this.one(\"mount\", mountTransition);\n            Object.defineProperty(this, \"unmount\", {\n                value: unmountTransition\n            });\n        }\n    };\n};\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nvar listenerMixin = exports.listenerMixin = function listenerMixin(_ref) {\n    var _ref$eventType = _ref.eventType,\n        eventType = _ref$eventType === undefined ? \"click\" : _ref$eventType,\n        callback = _ref.callback,\n        _ref$regulate = _ref.regulate,\n        regulate = _ref$regulate === undefined ? false : _ref$regulate;\n    return {\n        init: function init() {\n            var ticking = false;\n\n            var onEvent = function onEvent(event) {\n                if (callback) {\n                    if (regulate) {\n                        if (!ticking) {\n                            window.requestAnimationFrame(function () {\n                                return callback(event, function () {\n                                    return ticking = false;\n                                });\n                            });\n                        }\n                        ticking = true;\n                    } else callback(event);\n                }\n            };\n            this.one(\"mount\", function () {\n                document.addEventListener(eventType, onEvent);\n            });\n            this.one(\"unmount\", function () {\n                document.removeEventListener(eventType, onEvent);\n            });\n        }\n    };\n};\n\n/***/ }),\n/* 21 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\n    var riot = __webpack_require__(1)\n    riot.tag2('treeviewnode', '<ul if=\"{!opts.folded && !opts.loading}\" data-is=\"with-transition\" transition=\"{opts.transition}\" class=\"{node.ulCss()}\" ondragover=\"{!opts.depth ? rootEvents.onDragOver : null}\" ondragenter=\"{!opts.depth ? rootEvents.onDragEnter : null}\" ondragleave=\"{!opts.depth ? rootEvents.onDragLeave : null}\" ondrop=\"{!opts.depth ? rootEvents.onDrop : null}\"> <li each=\"{item in getModel()}\" class=\"{node.liCss(item)}\" draggable=\"{node.getDragEvents(item).draggable}\" ondragstart=\"{node.getDragEvents(item).onDragStart}\" ondragover=\"{node.getDragEvents(item).onDragOver}\" ondragenter=\"{node.getDragEvents(item).onDragEnter}\" ondragleave=\"{node.getDragEvents(item).onDragLeave}\" ondragend=\"{node.getDragEvents(item).onDragEnd}\" ondrop=\"{node.getDragEvents(item).onDrop}\"> <span class=\"{parent.node.mixCss(⁗item⁗)}\" onclick=\"{parent.node.onClick(item)}\"> <virtual if=\"{!parent.opts.displaytag}\"> {parent.opts.display(item, parent.opts)} </virtual> <virtual if=\"{parent.opts.displaytag}\" data-is=\"{parent.opts.displaytag(item, parent.opts)}\" item=\"{item}\"></virtual> <span if=\"{node.hasChildren(item) || node.isAsync(item) && !parent.opts.noopener}\" class=\"{node.mixCss(⁗opener⁗)}\" onclick=\"{node.onOpener(item)}\"></span> </span> <treeviewnode if=\"{node.hasChildren(item) || node.isAsync(item)}\" opts=\"{parent.opts}\" model=\"{getChildModel(item)}\" filteredmodel=\"{getChildFiltered(item)}\" ancestors=\"{getAncestors(item)}\" depth=\"{parent.opts.depth + 1}\" folded=\"{node.isFolded(item)}\" loading=\"{node.isAsync(item) && !node.isFolded(item)}\"> </TreeViewNode> </li> </ul> <span if=\"{opts.loading}\"></span>', '', '', function(opts) {\n\"use strict\";\n\nvar _this = this;\n\nvar _core = __webpack_require__(4);\n\nvar _mixins = __webpack_require__(2);\n\nthis.mixin((0, _mixins.optsMixin)());\n\n// Logic //\n\nthis.unfolded = [];\n\nthis.getModel = function () {\n    return _this.opts.searched ? _this.opts.model.filter(function (m) {\n        return _this.opts.filteredmodel.has(m);\n    }) : _this.opts.model;\n};\n\nthis.getChildModel = function (item) {\n    var childModel = item[_this.opts.category];\n\n    /* If data has to be retrieved asynchronously */\n    if (_this.node.isAsync(item) && !_this.node.isFolded(item) && _this.node.pending.indexOf(item) < 0) {\n        _this.node.unwrapPromise(item);\n    }\n    if (!_this.node.isAsync(item)) {\n        childModel = _this.opts.sort ? childModel.sort(_this.opts.sort) : childModel;\n    }\n\n    return childModel;\n};\n\nthis.getChildFiltered = function (item) {\n    return _this.opts.searched ? _this.opts.filteredmodel.get(item) : null;\n};\n\nthis.getAncestors = function (item) {\n    return [].concat(_this.opts.ancestors, [item]);\n};\n\n// Boilerplate //\n\nvar restoreCamelCase = function restoreCamelCase() {\n    _this.opts.onSelect = _this.opts.onselect;\n};\nthis.on(\"update\", restoreCamelCase);\nrestoreCamelCase();\n\nthis.inputs = { get: function get() {\n        return _this.opts;\n    } };\nthis.state = {\n    get: function get() {\n        return _this;\n    },\n    set: function set(s) {\n        for (var key in s) {\n            if (key in _this) _this[key] = s[key];\n        }\n    }\n};\nthis.node = new _core.TreeNode(this.inputs, null, this.state, this.update);\nthis.rootEvents = this.node.getDragEvents();\n});\n\n    \n  \n\n/***/ }),\n/* 22 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\n\nvar _riot = __webpack_require__(1);\n\nvar _riot2 = _interopRequireDefault(_riot);\n\nvar _mixins = __webpack_require__(2);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nexports.default = _riot2.default.tag(\"with-transition\", false, function (opts) {\n    var _this = this;\n\n    this.mixin((0, _mixins.transitionMixin)());\n    var updateKeys = function updateKeys() {\n        for (var key in _this.parent) {\n            if (_this.parent.hasOwnProperty(key)) _this[key] = _this.parent[key];\n        }\n    };\n    updateKeys();\n    this.on(\"update\", updateKeys);\n});\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// build/riot/index.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 8);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap cd6619bfc413fb2abef8","module.exports = __WEBPACK_EXTERNAL_MODULE_1__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"riot\",\"commonjs2\":\"riot\",\"amd\":\"riot\",\"root\":\"riot\"}\n// module id = 1\n// module chunks = 0","export * from \"./opts\"\nexport * from \"./transition\"\nexport * from \"./listener\"\n\n\n\n// WEBPACK FOOTER //\n// ./src/riot/mixins/index.js","// @flow\n\ntype arrayType<T> = {\n    last: () => T | null,\n    in: (T[], ?(T => boolean)) => T[],\n    notIn: (T[], ?(T => boolean)) => T[],\n    is: ({ isIn: T[][], notIn: T[][] }, ?(T => boolean)) => T[],\n    contains: T => boolean,\n    allIn: T[] => boolean\n}\n\nexport const array = <T>(self: T[]) : arrayType<T> => ({\n    last: () => self.length > 0 ? self[self.length - 1] : null,\n    \"in\": (arr, otherCondition) => self.filter(elt =>\n        arr.indexOf(elt) >= 0 && (!otherCondition || otherCondition(elt))),\n    notIn: (arr, otherCondition) => self.filter(elt =>\n        arr.indexOf(elt) < 0 && (!otherCondition || otherCondition(elt))),\n    is: ({ isIn = [], notIn = []}, otherCondition) => self.filter(elt =>\n        isIn.reduce((acc, curr) => curr.indexOf(elt) >= 0 && acc, true) &&\n        notIn.reduce((acc, curr) => curr.indexOf(elt) < 0 && acc, true) &&\n        (!otherCondition || otherCondition(elt))\n    ),\n    contains: element => self.indexOf(element) >= 0,\n    allIn: arr => self.every(elt => arr.indexOf(elt) >= 0)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/tools/arrays.js","// @flow\n\nimport { css, array, tree } from \"../tools\"\n\n// Drag and drop presets //\n\nexport const dragndrop = {\n    // Moves the selection //\n    selection: (model: void => Object[], cb: Object[] => void) => ({\n        draggable: true,\n        droppable: true,\n        drag: (item: Object, event: DragEvent, inputs: Object) => {\n            event.dataTransfer && event.dataTransfer.setData(\"application/json\", JSON.stringify(inputs.selection))\n        },\n        guard: (target: ?Object, event: DragEvent, inputs: Object) => {\n            // Other data types\n            if(event && event.dataTransfer && event.dataTransfer.types.indexOf(\"application/json\") < 0)\n                return false\n            // Prevent drop on self\n            const selfDrop = () => target && array(inputs.selection).contains(target)\n            // Prevent drop on child\n            const childDrop = () => inputs.ancestors &&\n                    inputs.ancestors.reduce((prev, curr) =>\n                        prev || array(inputs.selection).contains(curr), false)\n\n            return selfDrop() || childDrop()\n        },\n        drop: (target: ?Object, event: DragEvent, inputs: Object) => {\n            let updatedModel = tree(model(), inputs.category).filter(e => inputs.selection.indexOf(e) < 0)\n            const adjustedTarget =\n                target ?\n                    target[inputs.category] && target[inputs.category] instanceof Array ?\n                        target :\n                        array(inputs.ancestors).last() :\n                    null\n            if(adjustedTarget)\n                adjustedTarget[inputs.category] = [ ...adjustedTarget[inputs.category], ...inputs.selection ]\n            else\n                updatedModel = [ ...updatedModel, ...inputs.selection ]\n            cb(updatedModel)\n        }\n    }),\n    // Plucks an item on drag\n    pluck: (model: void => Object[], cb: Object[] => void) => ({\n        draggable: true,\n        backup: [],\n        drag: (item: Object, event: DragEvent, inputs: Object) => {\n            bak = JSON.stringify(model())\n            event.dataTransfer && event.dataTransfer.setData(\"application/json\", JSON.stringify(item))\n            setTimeout(() => cb(tree(model(), inputs.category).filter(e => e !== item)), 20)\n        },\n        cancel: () => {\n            cb(JSON.parse(bak))\n        }\n    }),\n    // Pastes item(s) on drop\n    paste: (model: void => Object[], cb: Object[] => void) => ({\n        droppable: true,\n        drop: (target: Object, event: DragEvent, inputs: Object) => {\n            if(event.dataTransfer && event.dataTransfer.types.indexOf(\"application/json\") > -1) {\n                const data = JSON.parse(event.dataTransfer.getData(\"application/json\"))\n                let updatedModel = [...model()]\n                const adjustedTarget =\n                    target ?\n                        target[inputs.category] && target[inputs.category] instanceof Array ?\n                            target :\n                            array(inputs.ancestors).last() :\n                        null\n                if(adjustedTarget)\n                    adjustedTarget[inputs.category] = [ ...adjustedTarget[inputs.category], data ]\n                else\n                    updatedModel = [ ...updatedModel, data ]\n                cb(updatedModel)\n            }\n        }\n    })\n}\nlet bak = \"[]\"\n\n// Utils\n\nexport const utils = {\n    // Returns a list of local files/folders dropped\n    filesystem: (event: DragEvent) => {\n        const items = event.dataTransfer ? event.dataTransfer.items : null\n        if(items && items.length > 0 && items[0].kind === \"file\") {\n            const files = []\n            for(let i = 0; i < items.length; i++) {\n                /* eslint-disable */\n                const item = (items[i] : any).webkitGetAsEntry() || items[i].getAsFile()\n                /* eslint-enable */\n                if(item) {\n                    files.push(item)\n                }\n            }\n            return files\n        }\n        return null\n    }\n}\n\n// Internal use //\n\nlet tickDragover = false\nexport const nodeEvents = {\n    onDragStart: function(item: ?Object) {\n        return function(event: DragEvent) {\n            event.stopPropagation()\n            this.inputs.get().dragndrop.onDrag(item, event, this.inputs.get())\n        }\n    },\n    onDragOver: function(item: ?Object) {\n        return function(event: DragEvent) {\n            event.preventDefault()\n            event.stopPropagation()\n\n            if(tickDragover) return\n            tickDragover = true\n\n            if(this.inputs.get().dragndrop.guard && this.inputs.get().dragndrop.guard(item, event, this.inputs.get())) {\n                event.dataTransfer && (event.dataTransfer.dropEffect = \"none\")\n                css.addClass(event.currentTarget, this.mixCss(\"nodrop\"))\n            } else {\n                css.addClass(event.currentTarget, this.mixCss(\"dragover\"))\n            }\n\n            requestAnimationFrame(() => { tickDragover = false })\n        }\n    },\n    onDragEnter: function(item: ?Object) {\n        return function(event: DragEvent) {\n            event.preventDefault()\n            event.stopPropagation()\n            // If dragging over an opener\n            if(item && (this.hasChildren(item) || this.isAsync(item)) && css.hasClass(event.target, this.mixCss(\"opener\"))) {\n                const newVal = this.state.get().unfolded.filter(i => i !== item)\n                newVal.push(item)\n                this.state.set({ unfolded: newVal })\n            }\n        }\n    },\n    onDragLeave: function(event: DragEvent) {\n        event.stopPropagation()\n        css.removeClass(event.currentTarget, this.mixCss(\"dragover\"))\n        css.removeClass(event.currentTarget, this.mixCss(\"nodrop\"))\n    },\n    onDrop: function(item: ?Object) {\n        return function(event: DragEvent) {\n            event.stopPropagation()\n            css.removeClass(event.currentTarget, this.mixCss(\"dragover\"))\n            css.removeClass(event.currentTarget, this.mixCss(\"nodrop\"))\n            this.inputs.get().dragndrop.onDrop(item, event, this.inputs.get())\n        }\n    },\n    onDragEnd: function(item: ?Object) {\n        return function(event: DragEvent) {\n            event.stopPropagation()\n            if(event.dataTransfer && event.dataTransfer.dropEffect === \"none\")\n                this.inputs.get().dragndrop.onCancel(item, event, this.inputs.get())\n        }\n    }\n}\n\nexport const wrapEvents = function() {\n    return {\n        ...this.inputs.get().dragndrop,\n        onDrag: (target: Object, event: DragEvent, inputs: Object) => {\n            if(!array(this.inputs.get().selection).contains(target)) {\n                this.onSelect(target, inputs.ancestors, inputs.neighbours)\n            }\n\n            this.outputs.onDrag && this.outputs.onDrag(target, event, inputs)\n        },\n        onDrop: (target: Object, event: DragEvent, inputs: Object) => {\n            event.preventDefault()\n            this.outputs.onDrop && this.outputs.onDrop(target, event, inputs)\n        },\n        onCancel: (target: Object, event: DragEvent, inputs: Object) => {\n            event.preventDefault()\n            if(event.dataTransfer && event.dataTransfer.dropEffect === \"none\")\n                this.outputs.onCancel && this.outputs.onCancel(target, event, inputs)\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/dragndrop.js","// @flow\n\nimport { array, tree } from \"../tools\"\n\ntype selectionStrategy = (item: Object, selection: Object[], neighbours: Object[], ancestors: Object[]) => Object[]\ntype clickStrategy = (item: Object, event: MouseEvent, ancestors: Array<Object>, neighbours: Array<Object>) => void\ntype foldStrategy = (item: Object, folded: boolean) => boolean\n\nconst singleSelect : selectionStrategy = function(item, selection, neighbours, ancestors) {\n    return array(selection).contains(item) ? [] : [item]\n}\nconst multiSelect : selectionStrategy = function(item, selection, neighbours, ancestors) {\n    let alreadySelected = false\n    let newSelection = selection.filter(i => {\n        // Mark if the item was already selected\n        if(!alreadySelected) alreadySelected = i === item\n        // Deselect all ancestors\n        return i !== item && ancestors.indexOf(i) < 0\n    })\n    // Categories : deselect all children\n    if(!alreadySelected && item[this.inputs.get().category] && item[this.inputs.get().category] instanceof Array) {\n        tree(item[this.inputs.get().category], this.inputs.get().category).visit((children: any) => {\n            newSelection = array(newSelection).notIn(children)\n        })\n    }\n    if(!alreadySelected) newSelection.push(item)\n    return newSelection\n}\n\n// Selection strategies are triggered when the selection is updated.\nexport const selectionStrategies : { [key: string] : selectionStrategy } = {\n    // The single strategy allows only one selected item at the same time (usually the last item clicked).\n    single: singleSelect,\n    // The multiple strategy allows any number of selected items and will add the last item clicked to the selection list.\n    multiple: multiSelect,\n    /*\n    The modifiers strategy is the way most file explorers behave.\n    Without keyboard modifiers, only one selected item is allowed.\n    While pressing the shift key, all items between the two last selected siblings are added to the selection array.\n    While pressing the ctrl (or cmd for mac users) key, the item is added to the selection list.\n     */\n    modifiers: function(item, selection, neighbours, ancestors) {\n        if(this.modifiers.control || this.modifiers.meta) {\n            this.lastSelection = item\n            delete this.lastIndex\n            delete this.lastPivot\n            return multiSelect.bind(this)(item, selection, neighbours, ancestors)\n        } else if(this.modifiers.shift) {\n            if(!this.lastSelection)\n                return selection\n\n            const originIndex = neighbours.indexOf(this.lastSelection)\n            if(originIndex < 0)\n                return selection\n\n            let newSelection = selection.slice()\n            const endIndex = neighbours.indexOf(item)\n\n            if(originIndex >= 0) {\n                if(this.lastPivot) {\n                    const lastIndex = neighbours.indexOf(this.lastPivot)\n                    const [ smaller, higher ] = originIndex > lastIndex ?\n                        [ lastIndex, originIndex ] :\n                        [ originIndex, lastIndex ]\n                    const deletions : any = neighbours.slice(smaller, higher + 1)\n                    newSelection = array(newSelection).notIn(deletions)\n                }\n                this.lastPivot = item\n\n                const [ smaller, higher ] = originIndex > endIndex ?\n                    [ endIndex, originIndex ] :\n                    [ originIndex, endIndex ]\n                const additions : any = !this.inputs.get().disabled ?\n                    neighbours.slice(smaller, higher + 1) :\n                    neighbours.slice(smaller, higher + 1).filter(i => !this.inputs.get().disabled(i))\n                newSelection = array(newSelection).notIn(additions)\n                newSelection.push(...additions)\n            }\n\n            return newSelection\n        } else {\n            this.lastSelection = item\n            delete this.lastIndex\n            delete this.lastPivot\n            return singleSelect.bind(this)(item, selection.length > 1 ? [] : selection, neighbours, ancestors)\n        }\n    },\n    // Selects an item and its ancestors.\n    ancestors: function(item, selection, neighbours, ancestors) {\n        return selection.length === 0 ?\n            [item] :\n            array(selection).contains(item) ?\n                [...ancestors] :\n                [ ...ancestors, item ]\n    }\n}\n\n// Click strategies are triggered on item click\nexport const clickStrategies : { [key: string] : clickStrategy } = {\n    // Unfold an item when selecting it. Pair it with the \"opener-control\" fold strategy.\n    \"unfold-on-selection\": function(item) {\n        if(!this.isSelected(item)) {\n            const newUnfolded = this.state.get().unfolded.filter(i => i !== item)\n            newUnfolded.push(item)\n            this.state.set({ unfolded: newUnfolded })\n        }\n    },\n    // Toggle fold/unfold. Pair it with the \"opener-control\" fold strategy.\n    \"toggle-fold\": function(item) {\n        const newUnfolded = this.state.get().unfolded.filter(i => i !== item)\n        if(newUnfolded.length === this.state.get().unfolded.length) {\n            newUnfolded.push(item)\n        }\n        this.state.set({ unfolded: newUnfolded })\n    }\n}\n\n// Fold strategies determine if an item will be folded or not, meaning if its children are hidden.\nexport const foldStrategies : { [key: string] : foldStrategy } = {\n    // Allow the opener (usually an arrow-like element) to control the fold state.\n    \"opener-control\": function(item) {\n        return !array(this.state.get().unfolded).contains(item)\n    },\n    // Fold when not selected.\n    \"not-selected\": function(item) {\n        return !this.isSelected(item)\n    },\n    // Unfold as long as there is at least one child selected.\n    \"no-child-selection\": function(item) {\n        // naive algorithm ...\n        const recurseCheck = node =>\n            this.isSelected(node) ||\n            node[this.inputs.get().category] &&\n            node[this.inputs.get().category] instanceof Array &&\n            node[this.inputs.get().category].some(recurseCheck)\n        return !recurseCheck(item)\n    },\n    // Fold every item deeper than then \"max-depth\" component property.\n    \"max-depth\": function() {\n        return this.inputs.get().maxDepth && !isNaN(parseInt(this.inputs.get().maxDepth, 10)) ?\n            this.inputs.get().depth >= parseInt(this.inputs.get().maxDepth, 10) :\n            false\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/strategies.js","// @flow\n\nexport const defaults = {\n    labels: {\n        \"search.placeholder\": \"Search ...\"\n    },\n    css: {\n        TreeView:           \"TreeView\",\n        opener:             \"opener\",\n        depth:              \"depth\",\n        selected:           \"selected\",\n        category:           \"category\",\n        folded:             \"folded\",\n        disabled:           \"disabled\",\n        async:              \"async\",\n        loading:            \"loading\",\n        nodrop:             \"nodrop\",\n        dragover:           \"dragover\",\n        search:             \"search\",\n        item:               \"item\"\n    },\n    strategies: {\n        selection: [\"single\"],\n        click: [],\n        fold: [ \"not-selected\", \"no-child-selection\" ]\n    },\n    display: (_: Object) => _.toString(),\n    async: (_: Function) => _(),\n    noOpener: false,\n    dragndrop: {\n        draggable: false,\n        droppable: false\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/defaults.js","import \"./components\"\n\n\n\n// WEBPACK FOOTER //\n// ./src/riot/index.js","import \"./TreeView.tag\"\nimport \"./TreeViewNode.tag\"\nimport \"./transitionDirective\"\n\n\n\n// WEBPACK FOOTER //\n// ./src/riot/components/index.js","\n    var riot = require('riot')\n    riot.tag2('treeview', '<div class=\"{rootNode.mixCss(⁗TreeView⁗)}\"> <input type=\"search\" class=\"{rootNode.mixCss(⁗search⁗)}\" if=\"{inputs.get().search}\" placeholder=\"{inputs.get().labels[⁗search.placeholder⁗]}\" onkeyup=\"{onSearch}\"> <treeviewnode opts=\"{inputs.get()}\" model=\"{inputs.get().sort ? inputs.get().model.sort(inputs.get().sort) : inputs.get().model}\" filteredmodel=\"{filtered}\" onselect=\"{rootNode.onSelect}\" dragndrop=\"{rootNode.wrapDragNDrop()}\" ancestors=\"{[]}\" searched=\"{search.trim()}\" depth=\"{+⁗0⁗}\"> </TreeViewNode> </div>', '', '', function(opts) {\n\"use strict\";\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _this = this;\n\nvar _tools = require(\"../../tools\");\n\nvar _core = require(\"../../core\");\n\nvar _mixins = require(\"../mixins\");\n\nthis.mixin((0, _mixins.optsMixin)());\nthis.mixin((0, _mixins.listenerMixin)({ eventType: \"keyup\", callback: function callback(e) {\n        return _this.rootNode.onKey(e);\n    }, autoMount: true }));\nthis.mixin((0, _mixins.listenerMixin)({ eventType: \"keydown\", callback: function callback(e) {\n        return _this.rootNode.onKey(e);\n    }, autoMount: true }));\n\n// Logic //\n\nthis.filtered = null;\nthis.search = \"\";\n\nthis.onSearch = function (evt) {\n    var input = evt.currentTarget.value;\n    _this.search = input;\n    _this.filtered = !input.trim() ? null : (0, _tools.tree)(_this.inputs.get().model, _this.inputs.get().category).treeFilter(_this.inputs.get().search(input.trim()));\n};\n\n// Boilerplate //\n\nthis.inputs = {\n    get: function get() {\n        return _extends({}, _core.defaults, _this.opts, {\n            onSelect: _this.opts.onselect\n        });\n    }\n};\nthis.outputs = {\n    onSelect: this.inputs.get().onselect,\n    onDrag: this.inputs.get().dragndrop && this.inputs.get().dragndrop.drag,\n    onDrop: this.inputs.get().dragndrop && this.inputs.get().dragndrop.drop,\n    onCancel: this.inputs.get().dragndrop && this.inputs.get().dragndrop.cancel\n};\nthis.state = {\n    get: function get() {\n        return _extends({}, _this);\n    },\n    set: function set(s) {\n        for (var key in s) {\n            if (key in _this) _this[key] = s[key];\n        }\n    }\n};\n\nthis.rootNode = new _core.RootNode(this.inputs, this.outputs, this.state, this.update);\n});\n\n    \n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/riot/components/TreeView.tag\n// module id = 10\n// module chunks = 0","// @flow\n\nimport { array } from \"./arrays\"\n\ntype treeMap<T> = Map<T, treeMap<T>>\ntype treeType<T> = {\n    flatten: () => T[],\n    filter: (T => boolean) => T[],\n    treeFilter: (T => boolean) => treeMap<T>,\n    add: (T, T) => T[],\n    visit: (T[] => void) => void\n}\n\nexport const tree = <Item: Object>(t: Item[], prop: string) : treeType<Item> => ({\n    flatten: () => {\n        let flattened : Item[] = []\n        let fifo : Item[][] = [t]\n        while(fifo.length > 0) {\n            const tree: Item[] = fifo.pop()\n            if(!(tree instanceof Array))\n                continue\n            flattened = [ ...array(flattened).notIn(tree), ...tree ]\n            fifo = [ ...fifo, ...tree.filter(item => item[prop]).map(item => item[prop]) ]\n        }\n\n        return flattened\n    },\n    filter: filterFun => {\n        const copy = t.filter(filterFun)\n        const recurse = list => {\n            list.forEach(item => {\n                if(item[prop] && item[prop] instanceof Array) {\n                    item[prop] = item[prop].filter(filterFun)\n                    recurse(item[prop])\n                }\n            })\n        }\n        recurse(copy)\n        return copy\n    },\n    treeFilter: filterFun => {\n        const finalMap = new Map()\n\n        const recurse = (list, map) => {\n            list.forEach(item => {\n                if(item[prop] && item[prop] instanceof Array) {\n                    const childMap = new Map()\n                    recurse(item[prop], childMap)\n                    if(childMap.size > 0) {\n                        map.set(item, childMap)\n                    } else if(filterFun(item)) {\n                        map.set(item, new Map())\n                    }\n                } else if(filterFun(item)) {\n                    map.set(item, null)\n                }\n            })\n        }\n        recurse(t, finalMap)\n        return finalMap\n    },\n    add: (parent, elt) => {\n        let fifo = [t]\n        while(fifo.length > 0) {\n            const tree = fifo.pop()\n            const idx = tree.indexOf(parent)\n            if(idx >= 0 && tree[idx][prop]) {\n                tree[idx][prop] = tree[idx][prop].slice()\n                tree[idx][prop].push(elt)\n                return t\n            }\n            fifo = [ ...fifo, ...tree.filter(item => item[prop]).map(item => item[prop]) ]\n        }\n        return t\n    },\n    visit: visitor => {\n        const fifo: Item[][] = [t]\n        while(fifo.length > 0) {\n            const tree = fifo.pop()\n            visitor(tree)\n            tree.forEach(child => child[prop] && child[prop] instanceof Array ?\n                fifo.push(child[prop]) :\n                null)\n        }\n    }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/tools/trees.js","// @flow\n\nexport const string = (str: string) => ({\n    contains: (input: string) => !!str && !!str.match(new RegExp(`.*${ input }.*`, \"gi\"))\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/tools/strings.js","// @flow\nexport const deepMix = function<O: Object, O2: Object>(one: O, two: O2, mergeArrays: boolean = false) : O | O & O2 {\n    if(!one || !two || typeof one !== \"object\" || typeof two !== \"object\")\n        return one\n\n    const clone : O & O2 = { ...one, ...two }\n    for(const prop: $Keys<O2> in two) {\n        if(two.hasOwnProperty(prop)) {\n            if(two[prop] instanceof Array && one[prop] instanceof Array) {\n                clone[prop] = mergeArrays ? [ ...one[prop], ...two[prop] ] : clone[prop] = two[prop]\n            } else if(typeof two[prop] === \"object\" && typeof one[prop] === \"object\") {\n                clone[prop] = deepMix(one[prop], two[prop], mergeArrays)\n            }\n        }\n    }\n\n    return clone\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/tools/mixin.js","// @flow\n\nexport const css = {\n    classes: (classes: {[key: string]: boolean | () => boolean }) => {\n        const css = []\n        for(const key in classes) {\n            if(classes[key]) {\n                css.push(key)\n            }\n        }\n        return css.join(\" \")\n    },\n    addClass: (elt: HTMLElement | EventTarget, cname: string) => {\n        if(elt instanceof HTMLElement)\n            elt.className = elt.className\n                .split(\" \")\n                .filter(c => c !== cname)\n                .join(\" \") + \" \" + cname\n    },\n    removeClass: (elt: HTMLElement | EventTarget, cname: string) => {\n        if(elt instanceof HTMLElement)\n            elt.className = elt.className\n                .split(\" \")\n                .filter(c => c !== cname)\n                .join(\" \")\n    },\n    hasClass: (elt: HTMLElement | EventTarget, cname: string) =>\n        elt instanceof HTMLElement ? elt.className.indexOf(cname) >= 0 : false\n}\n\n\n// WEBPACK FOOTER //\n// ./src/tools/css.js","// @flow\n\nexport const printer = {\n    debug: (title: string, msg: string, /* eslint-disable */logger: (string, ...params: string[]) => void = console.log/* eslint-enable */) => {\n        const headerStyle = \"background-color: red; color: white; font-size: 1.1em; font-weight: bold; padding: 3px 10px; border-radius: 5px\"\n        const titleStyle = \"color: #444; font-weight: bold; font-size: 1.1em\"\n        const msgStyle = \"color: #222; font-weight: bold\"\n\n        logger(`%cDEBUG%c ${title}`, headerStyle, titleStyle)\n        logger(`%c${msg}`, msgStyle)\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/tools/printer.js","// @flow\n\nexport const object = (self: Object) => {\n    if(!self || !(self instanceof Object)) {\n        throw new Error(\"Bad object format\")\n    }\n\n    return {\n        shallowCompare: (obj: Object, excludes: string[]) => {\n            let equals = true\n            for(const key in self) {\n                if(self.hasOwnProperty(key)) {\n                    if(!(excludes && excludes.indexOf(key) >= 0) && obj[key] !== self[key]) {\n                        equals = false\n                        return\n                    }\n                }\n            }\n            return equals\n        },\n        filter: (fun: mixed => boolean) : Object => {\n            const copy = {}\n            for(const prop in self) {\n                if(self.hasOwnProperty(prop) && fun(self[prop]))\n                    copy[prop] = self[prop]\n            }\n            return copy\n        },\n        map: (fun: mixed => mixed) : Object => {\n            const copy = {}\n            for(const prop in self) {\n                if(self.hasOwnProperty(prop))\n                    copy[prop] = fun(self[prop])\n            }\n            return copy\n        },\n        fullMap: (fun: (string, mixed) => [string, mixed]) : Object => {\n            const copy = {}\n            for(const prop in self) {\n                if(self.hasOwnProperty(prop)) {\n                    const [ newProp, newVal ] = fun(prop, self[prop])\n                    copy[newProp] = newVal\n                }\n            }\n            return copy\n        },\n        nestPrefix: (prefix: string, transform: string => string = _ => _) : Object => {\n            const copy = { [prefix]: {}}\n            for(const prop in self) {\n                if(self.hasOwnProperty(prop) && prop.startsWith(prefix)) {\n                    copy[prefix][transform(prop.substring(prefix.length))] = self[prop]\n                } else {\n                    copy[prop] = self[prop]\n                }\n            }\n            return copy\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/tools/objects.js","// @flow\n\nimport { css, array, tree } from \"../tools\"\nimport { wrapEvents, nodeEvents } from \"./dragndrop\"\nimport { selectionStrategies, foldStrategies, clickStrategies } from \"./strategies\"\nimport { defaults } from \"./defaults\"\n\n// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //\n//  Boilerplate  for framework class adapters\n\nclass Core<Input: Object> {\n    inputs: { get: () => Input }\n    outputs: Object\n    state: { get: () => Object, set: Object => void }\n    refresh: () => void\n\n    constructor(inputs: { get: () => Input }, outputs: Object, state: { get: () => Object, set: Object => void }, refresh: () => void) {\n        this.inputs = inputs\n        this.outputs = outputs\n        this.state = state\n        this.refresh = refresh\n    }\n\n}\n\n// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //\n// Tree node\n\nexport type TreeNodeInput = {\n    model:              Object[],\n    category:           string,\n    selection:          Object[],\n    onSelect:           (item: Object, ancestors: Object[], neighbours: Object[]) => void,\n    ancestors:          Object[],\n    strategies?:        Object,\n    disabled?:          Object => boolean,\n    dragndrop:          Object,\n    css:                { [key: string]: string },\n    async?:             (mixed => Promise<Object[]>) => Promise<Object[]>,\n    depth?:             number\n}\n\nexport class TreeNode extends Core {\n\n    /* Various checks */\n\n    isSelected = (item: Object) => array(this.inputs.get().selection).contains(item)\n    isFolded = (item: Object) : boolean => {\n        const strats = this.inputs.get().strategies\n        return  (!this.inputs.get().searched || this.isAsync(item)) &&\n                    (strats && strats.fold || [])\n                        .map(strat => (foldStrategies[strat] || strat).bind(this))\n                        .reduce((last, curr) => last && curr(item, last), true)\n    }\n    hasChildren = (item: Object) => item[this.inputs.get().category] && item[this.inputs.get().category] instanceof Array\n    isAsync = (item: ?Object) : boolean => !!item && [this.inputs.get().category] && typeof item[this.inputs.get().category] === \"function\"\n    isDisabled = (item: Object) => {\n        const disabledFun = this.inputs.get().disabled\n        return disabledFun ? disabledFun(item) : false\n    }\n    isDraggable = (item: ?Object) =>\n        item &&\n        this.inputs.get().dragndrop.draggable && (\n            typeof this.inputs.get().dragndrop.draggable === \"function\" ?\n                this.inputs.get().dragndrop.draggable(item) :\n                true\n        )\n    isDroppable = (item: ?Object) =>\n        this.inputs.get().dragndrop.droppable && (\n            typeof this.inputs.get().dragndrop.droppable === \"function\" ?\n                this.inputs.get().dragndrop.droppable(item) :\n                true\n        )\n\n    /* Styles calculation */\n\n    // Css mixin helper\n    mixCss = (prop: string) => this.inputs.get().css[prop] || defaults.css[prop]\n\n    ulCss = () =>\n        css.classes({\n            [`${this.mixCss(\"depth\")}-${this.inputs.get().depth || 0}`]: true\n        })\n\n    liCss = (item: Object) =>\n        css.classes({\n            [this.mixCss(\"selected\")]:  this.isSelected(item),\n            [this.mixCss(\"category\")]:  this.hasChildren(item) || this.isAsync(item),\n            [this.mixCss(\"folded\")]:    this.hasChildren(item) || this.isAsync(item) ? this.isFolded(item) : null,\n            [this.mixCss(\"disabled\")]:  this.isDisabled(item),\n            [this.mixCss(\"async\")]:     this.isAsync(item) && this.isFolded(item),\n            [this.mixCss(\"loading\")]:   this.isAsync(item) && !this.isFolded(item)\n        })\n\n    /* Promises */\n\n    // Pending promises\n    pending = []\n\n    // Unwrap a promise and mutate the model to add the results\n    unwrapPromise = (item: Object) => {\n        this.pending.push(item)\n        const asyncFun = this.inputs.get().async\n        if(!asyncFun)\n            return Promise.reject(new Error(\"Missing async function.\"))\n        else\n            return asyncFun(item[this.inputs.get().category])\n                .then(res => {\n                    item[this.inputs.get().category] = res\n                    this.refresh()\n                })\n                .catch(err => {\n                    /* eslint-disable */\n                    throw err\n                    /* eslint-enable */\n                })\n                .then(() => this.pending = this.pending.filter(e => e !== item))\n    }\n\n    /* Events */\n\n    // On item click\n    onClick = (item: Object) =>\n        (event: MouseEvent) => {\n            if(this.isDisabled(item))\n                return\n            const strats = this.inputs.get().strategies;\n            (strats && strats.click || [])\n                .map(strat => (clickStrategies[strat] || strat).bind(this))\n                .forEach(strat => strat(item, event, this.inputs.get().ancestors, this.inputs.get().model))\n            this.inputs.get().onSelect(item, this.inputs.get().ancestors, this.inputs.get().model)\n            event.stopPropagation()\n        }\n\n    // On opener click\n    onOpener(item: Object) {\n        return (event: MouseEvent) => {\n            const newVal = this.state.get().unfolded.filter(i => i !== item)\n            if(newVal.length === this.state.get().unfolded.length)\n                newVal.push(item)\n            this.state.set({ unfolded: newVal })\n            event.stopPropagation()\n        }\n    }\n\n    // Drag'n'drop //\n\n    getDragEvents = (item: ?Object, condition?: boolean = true) => {\n        if(!condition) return {}\n        const result = {\n            draggable:      this.isDraggable(item),\n            onDragStart:    this.isDraggable(item) && nodeEvents.onDragStart(item).bind(this),\n            onDragOver:     this.isDroppable(item) && nodeEvents.onDragOver(item).bind(this),\n            onDragEnter:    this.isDroppable(item) && nodeEvents.onDragEnter(item).bind(this),\n            onDragLeave:    this.isDroppable(item) && nodeEvents.onDragLeave.bind(this),\n            onDrop:         this.isDroppable(item) && nodeEvents.onDrop(item).bind(this),\n            onDragEnd:      this.isDraggable(item) && nodeEvents.onDragEnd(item).bind(this)\n        }\n        for(const key in result)\n            if(!result[key])\n                delete result[key]\n        return result\n    }\n\n}\n\n// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //\n// Root node of the tree\n\nexport type RootNodeInput = {\n    model:              Object[],\n    category:           string,\n    selection:          Object[],\n    strategies:         Object,\n    css:                { [key: string]: string },\n    dragndrop?:         Object,\n    search?:            string => Object => boolean\n}\n\nexport class RootNode extends Core {\n\n    /* Events */\n\n    // Keyboard modifiers list\n    modifiers = {}\n    onKey = (event: KeyboardEvent) => {\n        this.modifiers = {\n            control: event.getModifierState(\"Control\"),\n            meta: event.getModifierState(\"Meta\"),\n            shift: event.getModifierState(\"Shift\")\n        }\n    }\n\n    // When new element(s) are selected\n    onSelect = (item: Object, ancestors: Object[], neighbours: Object[]) => {\n        const selectionStrategy = this.inputs.get().strategies.selection || []\n        const newSelection = selectionStrategy\n            .map(strat => (selectionStrategies[strat] || strat).bind(this))\n            .reduce((last, curr) => curr(item, last, neighbours, ancestors), this.inputs.get().selection)\n        this.outputs.onSelect(newSelection, item, ancestors, neighbours)\n        return newSelection\n    }\n\n    // Framework input wrapper\n    wrapDragNDrop = wrapEvents.bind(this)\n\n    // Css mixin helper\n    mixCss = (prop: string) => this.inputs.get().css[prop] || defaults.css[prop]\n\n    // Used to filter the tree when performing a search\n    filterTree = (input: string) => {\n        const search = this.inputs.get().search\n        return !search ? null : !input.trim() ? null :\n            tree(this.inputs.get().model, this.inputs.get().category)\n                .treeFilter(search(input.trim()))\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/logic.js","export const optsMixin = (argument = \"opts\") => ({\n    init: function() {\n        this.on(\"update\", this.updateOpts)\n        this._originalOpts = Object.keys(this.opts)\n        this.updateOpts()\n    },\n    updateOpts: function() {\n        if(!this.opts) return\n        for(const key in this.opts[argument]) {\n            if(!~this._originalOpts.indexOf(key))\n                this.opts[key] = this.opts[argument][key]\n        }\n    }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/riot/mixins/opts.js","export const transitionMixin = nodeTarget => ({\n    init: function() {\n        if(!(\"transition\" in this.opts))\n            return\n        const transitionName = this.opts.transition.name\n        const origUnmount = this.unmount\n\n        const mountTransition = () => {\n            const target = (nodeTarget || (() => this.root))()\n            if(!target) return\n\n            target.classList.add(transitionName)\n            target.classList.add(`${transitionName}-mount`)\n            setTimeout(() => {\n                target.classList.remove(`${transitionName}-mount`)\n            }, 10)\n        }\n\n        let guard = false\n        const unmountTransition = () => {\n            if(guard) return\n            guard = true\n            const target = (nodeTarget || (() => this.root))()\n            if(!target) return origUnmount.call(this)\n\n            target.addEventListener(\"transitionend\", () => {\n                origUnmount.call(this)\n            })\n            target.classList.add(`${transitionName}-unmount`)\n        }\n\n        this.one(\"mount\", mountTransition)\n        Object.defineProperty(this, \"unmount\", {\n            value: unmountTransition\n        })\n    }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/riot/mixins/transition.js","export const listenerMixin = ({\n    eventType = \"click\",\n    callback,\n    regulate = false\n}) => ({\n    init: function() {\n        let ticking = false\n\n        const onEvent = event => {\n            if(callback) {\n                if(regulate) {\n                    if(!ticking) {\n                        window.requestAnimationFrame(() => callback(event, () => ticking = false))\n                    }\n                    ticking = true\n                } else\n                    callback(event)\n            }\n        }\n        this.one(\"mount\", () => {\n            document.addEventListener(eventType, onEvent)\n        })\n        this.one(\"unmount\", () => {\n            document.removeEventListener(eventType, onEvent)\n        })\n    }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/riot/mixins/listener.js","\n    var riot = require('riot')\n    riot.tag2('treeviewnode', '<ul if=\"{!opts.folded && !opts.loading}\" data-is=\"with-transition\" transition=\"{opts.transition}\" class=\"{node.ulCss()}\" ondragover=\"{!opts.depth ? rootEvents.onDragOver : null}\" ondragenter=\"{!opts.depth ? rootEvents.onDragEnter : null}\" ondragleave=\"{!opts.depth ? rootEvents.onDragLeave : null}\" ondrop=\"{!opts.depth ? rootEvents.onDrop : null}\"> <li each=\"{item in getModel()}\" class=\"{node.liCss(item)}\" draggable=\"{node.getDragEvents(item).draggable}\" ondragstart=\"{node.getDragEvents(item).onDragStart}\" ondragover=\"{node.getDragEvents(item).onDragOver}\" ondragenter=\"{node.getDragEvents(item).onDragEnter}\" ondragleave=\"{node.getDragEvents(item).onDragLeave}\" ondragend=\"{node.getDragEvents(item).onDragEnd}\" ondrop=\"{node.getDragEvents(item).onDrop}\"> <span class=\"{parent.node.mixCss(⁗item⁗)}\" onclick=\"{parent.node.onClick(item)}\"> <virtual if=\"{!parent.opts.displaytag}\"> {parent.opts.display(item, parent.opts)} </virtual> <virtual if=\"{parent.opts.displaytag}\" data-is=\"{parent.opts.displaytag(item, parent.opts)}\" item=\"{item}\"></virtual> <span if=\"{node.hasChildren(item) || node.isAsync(item) && !parent.opts.noopener}\" class=\"{node.mixCss(⁗opener⁗)}\" onclick=\"{node.onOpener(item)}\"></span> </span> <treeviewnode if=\"{node.hasChildren(item) || node.isAsync(item)}\" opts=\"{parent.opts}\" model=\"{getChildModel(item)}\" filteredmodel=\"{getChildFiltered(item)}\" ancestors=\"{getAncestors(item)}\" depth=\"{parent.opts.depth + 1}\" folded=\"{node.isFolded(item)}\" loading=\"{node.isAsync(item) && !node.isFolded(item)}\"> </TreeViewNode> </li> </ul> <span if=\"{opts.loading}\"></span>', '', '', function(opts) {\n\"use strict\";\n\nvar _this = this;\n\nvar _core = require(\"../../core\");\n\nvar _mixins = require(\"../mixins\");\n\nthis.mixin((0, _mixins.optsMixin)());\n\n// Logic //\n\nthis.unfolded = [];\n\nthis.getModel = function () {\n    return _this.opts.searched ? _this.opts.model.filter(function (m) {\n        return _this.opts.filteredmodel.has(m);\n    }) : _this.opts.model;\n};\n\nthis.getChildModel = function (item) {\n    var childModel = item[_this.opts.category];\n\n    /* If data has to be retrieved asynchronously */\n    if (_this.node.isAsync(item) && !_this.node.isFolded(item) && _this.node.pending.indexOf(item) < 0) {\n        _this.node.unwrapPromise(item);\n    }\n    if (!_this.node.isAsync(item)) {\n        childModel = _this.opts.sort ? childModel.sort(_this.opts.sort) : childModel;\n    }\n\n    return childModel;\n};\n\nthis.getChildFiltered = function (item) {\n    return _this.opts.searched ? _this.opts.filteredmodel.get(item) : null;\n};\n\nthis.getAncestors = function (item) {\n    return [].concat(_this.opts.ancestors, [item]);\n};\n\n// Boilerplate //\n\nvar restoreCamelCase = function restoreCamelCase() {\n    _this.opts.onSelect = _this.opts.onselect;\n};\nthis.on(\"update\", restoreCamelCase);\nrestoreCamelCase();\n\nthis.inputs = { get: function get() {\n        return _this.opts;\n    } };\nthis.state = {\n    get: function get() {\n        return _this;\n    },\n    set: function set(s) {\n        for (var key in s) {\n            if (key in _this) _this[key] = s[key];\n        }\n    }\n};\nthis.node = new _core.TreeNode(this.inputs, null, this.state, this.update);\nthis.rootEvents = this.node.getDragEvents();\n});\n\n    \n  \n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/riot/components/TreeViewNode.tag\n// module id = 21\n// module chunks = 0","import riot from \"riot\"\nimport { transitionMixin } from \"../mixins\"\n\nexport default riot.tag(\"with-transition\", false, function(opts) {\n    this.mixin(transitionMixin())\n    const updateKeys = () => {\n        for(const key in this.parent) {\n            if(this.parent.hasOwnProperty(key)) this[key] = this.parent[key]\n        }\n    }\n    updateKeys()\n    this.on(\"update\", updateKeys)\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/riot/components/transitionDirective.js"],"sourceRoot":""}