{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///core/bundle/core.umd.min.js","webpack:///webpack/bootstrap 77f8ff61b5a73899a1fd","webpack:///external {\"commonjs\":\"@bosket/tools\",\"commonjs2\":\"@bosket/tools\",\"amd\":\"@bosket/tools\",\"root\":\"bosket-tools\"}","webpack:///./src/core/dragndrop.js","webpack:///./src/core/strategies.js","webpack:///./src/core/defaults.js","webpack:///./src/core/logic.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_0__","modules","__webpack_require__","moduleId","installedModules","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__webpack_exports__","_toConsumableArray","arr","Array","isArray","arr2","length","from","dragndrop","utils","nodeEvents","wrapEvents","__WEBPACK_IMPORTED_MODULE_0__bosket_tools__","_extends","assign","target","arguments","source","key","selection","model","cb","draggable","droppable","drag","item","event","inputs","dataTransfer","setData","JSON","stringify","guard","types","indexOf","contains","ancestors","reduce","prev","curr","drop","updatedModel","category","filter","e","adjustedTarget","last","concat","pluck","backup","bak","setTimeout","cancel","parse","paste","data","getData","filesystem","items","kind","files","webkitGetAsEntry","getAsFile","push","hoverReferences","itemRef","undefined","guardCheck","onDragStart","stopPropagation","onDrag","onDragOver","preventDefault","dropEffect","addClass","currentTarget","mixCss","onOver","onDragEnter","hasChildren","isAsync","hasClass","newVal","state","unfolded","set","onEnter","onDragLeave","removeClass","onLeave","onDrop","onDragEnd","onCancel","_this","onSelect","neighbours","outputs","selectionStrategies","clickStrategies","foldStrategies","_slicedToArray","sliceIterator","_arr","_n","_d","_e","_s","_i","Symbol","iterator","next","done","value","err","TypeError","singleSelect","multiSelect","alreadySelected","newSelection","visit","children","notIn","single","multiple","modifiers","control","meta","lastSelection","lastIndex","lastPivot","bind","shift","originIndex","slice","endIndex","_newSelection","_ref","_ref2","smaller","higher","deletions","_ref3","_ref4","additions","disabled","apply","_x","_x2","_x3","_x4","_ancestors","toString","unfold-on-selection","isSelected","newUnfolded","toggle-fold","opener-control","not-selected","no-child-selection","_this2","recurseCheck","node","some","max-depth","maxDepth","isNaN","parseInt","depth","defaults","labels","search.placeholder","css","TreeView","opener","selected","folded","async","loading","nodrop","dragover","search","strategies","click","fold","display","_","noOpener","__WEBPACK_IMPORTED_MODULE_0__logic__","__WEBPACK_IMPORTED_MODULE_1__strategies__","__WEBPACK_IMPORTED_MODULE_2__defaults__","__WEBPACK_IMPORTED_MODULE_3__dragndrop__","_defineProperty","obj","writable","_possibleConstructorReturn","self","ReferenceError","_inherits","subClass","superClass","create","constructor","setPrototypeOf","__proto__","_classCallCheck","instance","Constructor","TreeNode","RootNode","__WEBPACK_IMPORTED_MODULE_1__dragndrop__","__WEBPACK_IMPORTED_MODULE_2__strategies__","__WEBPACK_IMPORTED_MODULE_3__defaults__","_createClass","defineProperties","props","descriptor","protoProps","staticProps","Core","refresh","_Core","_temp","_ret","_len","args","_key","getPrototypeOf","isFolded","strats","searched","map","strat","isDisabled","disabledFun","isDraggable","isDroppable","prop","ulCss","classes","liCss","_css$classes2","pending","unwrapPromise","asyncFun","then","res","catch","Promise","reject","Error","onClick","forEach","getDragEvents","result","_Core2","_temp2","_this3","_ret2","_len2","_key3","onKey","getModifierState","selectionStrategy","wrapDragNDrop","filterTree","input","trim","treeFilter"],"mappings":"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","file":"core/bundle/core.umd.min.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@bosket/tools\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@bosket/tools\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"bosket-core\"] = factory(require(\"@bosket/tools\"));\n\telse\n\t\troot[\"bosket-core\"] = factory(root[\"bosket-tools\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"@bosket/tools\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"@bosket/tools\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"bosket-core\"] = factory(require(\"@bosket/tools\"));\n\telse\n\t\troot[\"bosket-core\"] = factory(root[\"bosket-tools\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 18);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */,\n/* 6 */,\n/* 7 */,\n/* 8 */,\n/* 9 */,\n/* 10 */,\n/* 11 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return dragndrop; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return utils; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return nodeEvents; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"d\", function() { return wrapEvents; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__bosket_tools__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__bosket_tools___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__);\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\n\n// Drag and drop presets //\n\nvar dragndrop = {\n    // Moves the selection //\n    selection: function selection(model, cb) {\n        return {\n            draggable: true,\n            droppable: true,\n            drag: function drag(item, event, inputs) {\n                event.dataTransfer && event.dataTransfer.setData(\"application/json\", JSON.stringify(inputs.selection));\n            },\n            guard: function guard(target, event, inputs) {\n                // Other data types\n                if (event && event.dataTransfer && event.dataTransfer.types.indexOf(\"application/json\") < 0) return false;\n                // Prevent drop on self\n                var selfDrop = function selfDrop() {\n                    return target && Object(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"array\"])(inputs.selection).contains(target);\n                };\n                // Prevent drop on child\n                var childDrop = function childDrop() {\n                    return inputs.ancestors && inputs.ancestors.reduce(function (prev, curr) {\n                        return prev || Object(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"array\"])(inputs.selection).contains(curr);\n                    }, false);\n                };\n\n                return selfDrop() || childDrop();\n            },\n            drop: function drop(target, event, inputs) {\n                var updatedModel = Object(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"tree\"])(model(), inputs.category).filter(function (e) {\n                    return inputs.selection.indexOf(e) < 0;\n                });\n                var adjustedTarget = target ? target[inputs.category] && target[inputs.category] instanceof Array ? target : Object(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"array\"])(inputs.ancestors).last() : null;\n                if (adjustedTarget) adjustedTarget[inputs.category] = [].concat(_toConsumableArray(adjustedTarget[inputs.category]), _toConsumableArray(inputs.selection));else updatedModel = [].concat(_toConsumableArray(updatedModel), _toConsumableArray(inputs.selection));\n                cb(updatedModel);\n            }\n        };\n    },\n    // Plucks an item on drag\n    pluck: function pluck(model, cb) {\n        return {\n            draggable: true,\n            backup: [],\n            drag: function drag(item, event, inputs) {\n                bak = JSON.stringify(model());\n                event.dataTransfer && event.dataTransfer.setData(\"application/json\", JSON.stringify(item));\n                setTimeout(function () {\n                    return cb(Object(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"tree\"])(model(), inputs.category).filter(function (e) {\n                        return e !== item;\n                    }));\n                }, 20);\n            },\n            cancel: function cancel() {\n                cb(JSON.parse(bak));\n            }\n        };\n    },\n    // Pastes item(s) on drop\n    paste: function paste(model, cb) {\n        return {\n            droppable: true,\n            drop: function drop(target, event, inputs) {\n                if (event.dataTransfer && event.dataTransfer.types.indexOf(\"application/json\") > -1) {\n                    var data = JSON.parse(event.dataTransfer.getData(\"application/json\"));\n                    var updatedModel = [].concat(_toConsumableArray(model()));\n                    var adjustedTarget = target ? target[inputs.category] && target[inputs.category] instanceof Array ? target : Object(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"array\"])(inputs.ancestors).last() : null;\n                    if (adjustedTarget) adjustedTarget[inputs.category] = [].concat(_toConsumableArray(adjustedTarget[inputs.category]), [data]);else updatedModel = [].concat(_toConsumableArray(updatedModel), [data]);\n                    cb(updatedModel);\n                }\n            }\n        };\n    }\n};\nvar bak = \"[]\";\n\n// Utils\n\nvar utils = {\n    // Returns a list of local files/folders dropped\n    filesystem: function filesystem(event) {\n        var items = event.dataTransfer ? event.dataTransfer.items : null;\n        if (items && items.length > 0 && items[0].kind === \"file\") {\n            var files = [];\n            for (var i = 0; i < items.length; i++) {\n                /* eslint-disable */\n                var item = items[i].webkitGetAsEntry() || items[i].getAsFile();\n                /* eslint-enable */\n                if (item) {\n                    files.push(item);\n                }\n            }\n            return files;\n        }\n        return null;\n    }\n\n    // Internal use //\n\n};var hoverReferences = {\n    itemRef: undefined,\n    guardCheck: false\n};\nvar nodeEvents = {\n    onDragStart: function onDragStart(item) {\n        return function (event) {\n            event.stopPropagation();\n            this.inputs.get().dragndrop.onDrag(item, event, this.inputs.get());\n        };\n    },\n    onDragOver: function onDragOver(item) {\n        return function (event) {\n            event.preventDefault();\n            event.stopPropagation();\n\n            var guardCheck = hoverReferences.itemRef === item ? hoverReferences.guardCheck : this.inputs.get().dragndrop.guard && this.inputs.get().dragndrop.guard(item, event, this.inputs.get());\n\n            if (guardCheck) {\n                if (event.dataTransfer) event.dataTransfer.dropEffect = \"none\";\n                __WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"css\"].addClass(event.currentTarget, this.mixCss(\"nodrop\"));\n            } else {\n                if (event.dataTransfer) event.dataTransfer.dropEffect = \"copy\";\n                __WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"css\"].addClass(event.currentTarget, this.mixCss(\"dragover\"));\n            }\n\n            hoverReferences.itemRef = item;\n            hoverReferences.guardCheck = guardCheck;\n\n            this.inputs.get().dragndrop.onOver(item, event, this.inputs.get());\n        };\n    },\n    onDragEnter: function onDragEnter(item) {\n        return function (event) {\n            event.preventDefault();\n            event.stopPropagation();\n            // If dragging over an opener\n            if (item && (this.hasChildren(item) || this.isAsync(item)) && __WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"css\"].hasClass(event.target, this.mixCss(\"opener\"))) {\n                var newVal = this.state.get().unfolded.filter(function (i) {\n                    return i !== item;\n                });\n                newVal.push(item);\n                this.state.set({ unfolded: newVal });\n            }\n\n            this.inputs.get().dragndrop.onEnter(item, event, this.inputs.get());\n        };\n    },\n    onDragLeave: function onDragLeave(item) {\n        return function (event) {\n            event.stopPropagation();\n            __WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"css\"].removeClass(event.currentTarget, this.mixCss(\"dragover\"));\n            __WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"css\"].removeClass(event.currentTarget, this.mixCss(\"nodrop\"));\n\n            this.inputs.get().dragndrop.onLeave(item, event, this.inputs.get());\n        };\n    },\n    onDrop: function onDrop(item) {\n        return function (event) {\n            event.stopPropagation();\n            __WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"css\"].removeClass(event.currentTarget, this.mixCss(\"dragover\"));\n            __WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"css\"].removeClass(event.currentTarget, this.mixCss(\"nodrop\"));\n            if (!this.inputs.get().dragndrop.guard || !this.inputs.get().dragndrop.guard(item, event, this.inputs.get())) {\n                this.inputs.get().dragndrop.onDrop(item, event, this.inputs.get());\n            }\n        };\n    },\n    onDragEnd: function onDragEnd(item) {\n        return function (event) {\n            event.stopPropagation();\n            if (event.dataTransfer && event.dataTransfer.dropEffect === \"none\") this.inputs.get().dragndrop.onCancel(item, event, this.inputs.get());\n        };\n    }\n};\n\nvar wrapEvents = function wrapEvents() {\n    var _this = this;\n\n    return _extends({}, this.inputs.get().dragndrop, {\n        onDrag: function onDrag(target, event, inputs) {\n            if (!Object(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"array\"])(_this.inputs.get().selection).contains(target)) {\n                _this.onSelect(target, inputs.ancestors, inputs.neighbours);\n            }\n\n            _this.outputs.onDrag && _this.outputs.onDrag(target, event, inputs);\n        },\n        onOver: function onOver(target, event, inputs) {\n            _this.outputs.onOver && _this.outputs.onOver(target, event, inputs);\n        },\n        onEnter: function onEnter(target, event, inputs) {\n            _this.outputs.onEnter && _this.outputs.onEnter(target, event, inputs);\n        },\n        onLeave: function onLeave(target, event, inputs) {\n            _this.outputs.onLeave && _this.outputs.onLeave(target, event, inputs);\n        },\n        onDrop: function onDrop(target, event, inputs) {\n            event.preventDefault();\n            _this.outputs.onDrop && _this.outputs.onDrop(target, event, inputs);\n        },\n        onCancel: function onCancel(target, event, inputs) {\n            event.preventDefault();\n            if (event.dataTransfer && event.dataTransfer.dropEffect === \"none\") _this.outputs.onCancel && _this.outputs.onCancel(target, event, inputs);\n        }\n    });\n};\n\n/***/ }),\n/* 12 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"c\", function() { return selectionStrategies; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return clickStrategies; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return foldStrategies; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__bosket_tools__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__bosket_tools___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__);\nvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\n\n\nvar singleSelect = function singleSelect(item, selection, neighbours, ancestors) {\n    return Object(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"array\"])(selection).contains(item) ? [] : [item];\n};\nvar multiSelect = function multiSelect(item, selection, neighbours, ancestors) {\n    var alreadySelected = false;\n    var newSelection = selection.filter(function (i) {\n        // Mark if the item was already selected\n        if (!alreadySelected) alreadySelected = i === item;\n        // Deselect all ancestors\n        return i !== item && ancestors.indexOf(i) < 0;\n    });\n    // Categories : deselect all children\n    if (!alreadySelected && item[this.inputs.get().category] && item[this.inputs.get().category] instanceof Array) {\n        Object(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"tree\"])(item[this.inputs.get().category], this.inputs.get().category).visit(function (children) {\n            newSelection = Object(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"array\"])(newSelection).notIn(children);\n        });\n    }\n    if (!alreadySelected) newSelection.push(item);\n    return newSelection;\n};\n\n// Selection strategies are triggered when the selection is updated.\nvar selectionStrategies = {\n    // The single strategy allows only one selected item at the same time (usually the last item clicked).\n    single: singleSelect,\n    // The multiple strategy allows any number of selected items and will add the last item clicked to the selection list.\n    multiple: multiSelect,\n    /*\n    The modifiers strategy is the way most file explorers behave.\n    Without keyboard modifiers, only one selected item is allowed.\n    While pressing the shift key, all items between the two last selected siblings are added to the selection array.\n    While pressing the ctrl (or cmd for mac users) key, the item is added to the selection list.\n     */\n    modifiers: function modifiers(item, selection, neighbours, ancestors) {\n        var _this = this;\n\n        if (this.modifiers.control || this.modifiers.meta) {\n            this.lastSelection = item;\n            delete this.lastIndex;\n            delete this.lastPivot;\n            return multiSelect.bind(this)(item, selection, neighbours, ancestors);\n        } else if (this.modifiers.shift) {\n            if (!this.lastSelection) return selection;\n\n            var originIndex = neighbours.indexOf(this.lastSelection);\n            if (originIndex < 0) return selection;\n\n            var newSelection = selection.slice();\n            var endIndex = neighbours.indexOf(item);\n\n            if (originIndex >= 0) {\n                var _newSelection;\n\n                if (this.lastPivot) {\n                    var lastIndex = neighbours.indexOf(this.lastPivot);\n\n                    var _ref = originIndex > lastIndex ? [lastIndex, originIndex] : [originIndex, lastIndex],\n                        _ref2 = _slicedToArray(_ref, 2),\n                        _smaller = _ref2[0],\n                        _higher = _ref2[1];\n\n                    var deletions = neighbours.slice(_smaller, _higher + 1);\n                    newSelection = Object(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"array\"])(newSelection).notIn(deletions);\n                }\n                this.lastPivot = item;\n\n                var _ref3 = originIndex > endIndex ? [endIndex, originIndex] : [originIndex, endIndex],\n                    _ref4 = _slicedToArray(_ref3, 2),\n                    smaller = _ref4[0],\n                    higher = _ref4[1];\n\n                var additions = !this.inputs.get().disabled ? neighbours.slice(smaller, higher + 1) : neighbours.slice(smaller, higher + 1).filter(function (i) {\n                    return !_this.inputs.get().disabled(i);\n                });\n                newSelection = Object(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"array\"])(newSelection).notIn(additions);\n                (_newSelection = newSelection).push.apply(_newSelection, _toConsumableArray(additions));\n            }\n\n            return newSelection;\n        } else {\n            this.lastSelection = item;\n            delete this.lastIndex;\n            delete this.lastPivot;\n            return singleSelect.bind(this)(item, selection.length > 1 ? [] : selection, neighbours, ancestors);\n        }\n    },\n    // Selects an item and its ancestors.\n    ancestors: function (_ancestors) {\n        function ancestors(_x, _x2, _x3, _x4) {\n            return _ancestors.apply(this, arguments);\n        }\n\n        ancestors.toString = function () {\n            return _ancestors.toString();\n        };\n\n        return ancestors;\n    }(function (item, selection, neighbours, ancestors) {\n        return selection.length === 0 ? [item] : Object(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"array\"])(selection).contains(item) ? [].concat(_toConsumableArray(ancestors)) : [].concat(_toConsumableArray(ancestors), [item]);\n    })\n\n    // Click strategies are triggered on item click\n};var clickStrategies = {\n    // Unfold an item when selecting it. Pair it with the \"opener-control\" fold strategy.\n    \"unfold-on-selection\": function unfoldOnSelection(item) {\n        if (!this.isSelected(item)) {\n            var newUnfolded = this.state.get().unfolded.filter(function (i) {\n                return i !== item;\n            });\n            newUnfolded.push(item);\n            this.state.set({ unfolded: newUnfolded });\n        }\n    },\n    // Toggle fold/unfold. Pair it with the \"opener-control\" fold strategy.\n    \"toggle-fold\": function toggleFold(item) {\n        var newUnfolded = this.state.get().unfolded.filter(function (i) {\n            return i !== item;\n        });\n        if (newUnfolded.length === this.state.get().unfolded.length) {\n            newUnfolded.push(item);\n        }\n        this.state.set({ unfolded: newUnfolded });\n    }\n\n    // Fold strategies determine if an item will be folded or not, meaning if its children are hidden.\n};var foldStrategies = {\n    // Allow the opener (usually an arrow-like element) to control the fold state.\n    \"opener-control\": function openerControl(item) {\n        return !Object(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"array\"])(this.state.get().unfolded).contains(item);\n    },\n    // Fold when not selected.\n    \"not-selected\": function notSelected(item) {\n        return !this.isSelected(item);\n    },\n    // Unfold as long as there is at least one child selected.\n    \"no-child-selection\": function noChildSelection(item) {\n        var _this2 = this;\n\n        // naive algorithm ...\n        var recurseCheck = function recurseCheck(node) {\n            return _this2.isSelected(node) || node[_this2.inputs.get().category] && node[_this2.inputs.get().category] instanceof Array && node[_this2.inputs.get().category].some(recurseCheck);\n        };\n        return !recurseCheck(item);\n    },\n    // Fold every item deeper than then \"max-depth\" component property.\n    \"max-depth\": function maxDepth() {\n        return this.inputs.get().maxDepth && !isNaN(parseInt(this.inputs.get().maxDepth, 10)) ? this.inputs.get().depth >= parseInt(this.inputs.get().maxDepth, 10) : false;\n    }\n};\n\n/***/ }),\n/* 13 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return defaults; });\nvar defaults = {\n    labels: {\n        \"search.placeholder\": \"Search ...\"\n    },\n    css: {\n        TreeView: \"TreeView\",\n        opener: \"opener\",\n        depth: \"depth\",\n        selected: \"selected\",\n        category: \"category\",\n        folded: \"folded\",\n        disabled: \"disabled\",\n        async: \"async\",\n        loading: \"loading\",\n        nodrop: \"nodrop\",\n        dragover: \"dragover\",\n        search: \"search\",\n        item: \"item\"\n    },\n    strategies: {\n        selection: [\"single\"],\n        click: [],\n        fold: [\"not-selected\", \"no-child-selection\"]\n    },\n    display: function display(_) {\n        return _.toString();\n    },\n    async: function async(_) {\n        return _();\n    },\n    noOpener: false,\n    dragndrop: {\n        draggable: false,\n        droppable: false\n    }\n};\n\n/***/ }),\n/* 14 */,\n/* 15 */,\n/* 16 */,\n/* 17 */,\n/* 18 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__logic__ = __webpack_require__(19);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"TreeNode\", function() { return __WEBPACK_IMPORTED_MODULE_0__logic__[\"b\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"RootNode\", function() { return __WEBPACK_IMPORTED_MODULE_0__logic__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__strategies__ = __webpack_require__(12);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"selectionStrategies\", function() { return __WEBPACK_IMPORTED_MODULE_1__strategies__[\"c\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"clickStrategies\", function() { return __WEBPACK_IMPORTED_MODULE_1__strategies__[\"a\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"foldStrategies\", function() { return __WEBPACK_IMPORTED_MODULE_1__strategies__[\"b\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__defaults__ = __webpack_require__(13);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"defaults\", function() { return __WEBPACK_IMPORTED_MODULE_2__defaults__[\"a\"]; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__dragndrop__ = __webpack_require__(11);\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"dragndrop\", function() { return __WEBPACK_IMPORTED_MODULE_3__dragndrop__[\"a\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"utils\", function() { return __WEBPACK_IMPORTED_MODULE_3__dragndrop__[\"c\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"nodeEvents\", function() { return __WEBPACK_IMPORTED_MODULE_3__dragndrop__[\"b\"]; });\n/* harmony namespace reexport (by provided) */ __webpack_require__.d(__webpack_exports__, \"wrapEvents\", function() { return __WEBPACK_IMPORTED_MODULE_3__dragndrop__[\"d\"]; });\n\n\n\n\n\n/***/ }),\n/* 19 */\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"b\", function() { return TreeNode; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return RootNode; });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__bosket_tools__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__bosket_tools___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__dragndrop__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__strategies__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__defaults__ = __webpack_require__(13);\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n\n\n\n\n\n// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //\n//  Boilerplate  for framework class adapters\n\nvar Core = function Core(inputs, outputs, state, refresh) {\n    _classCallCheck(this, Core);\n\n    this.inputs = inputs;\n    this.outputs = outputs;\n    this.state = state;\n    this.refresh = refresh;\n};\n\n// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //\n// Tree node\n\nvar TreeNode = function (_Core) {\n    _inherits(TreeNode, _Core);\n\n    function TreeNode() {\n        var _ref;\n\n        var _temp, _this, _ret;\n\n        _classCallCheck(this, TreeNode);\n\n        for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n        }\n\n        return _ret = (_temp = (_this = _possibleConstructorReturn(this, (_ref = TreeNode.__proto__ || Object.getPrototypeOf(TreeNode)).call.apply(_ref, [this].concat(args))), _this), _this.isSelected = function (item) {\n            return Object(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"array\"])(_this.inputs.get().selection).contains(item);\n        }, _this.isFolded = function (item) {\n            var strats = _this.inputs.get().strategies;\n            return (!_this.inputs.get().searched || _this.isAsync(item)) && (strats && strats.fold || []).map(function (strat) {\n                return (__WEBPACK_IMPORTED_MODULE_2__strategies__[\"b\" /* foldStrategies */][strat] || strat).bind(_this);\n            }).reduce(function (last, curr) {\n                return last && curr(item, last);\n            }, true);\n        }, _this.hasChildren = function (item) {\n            return item[_this.inputs.get().category] && item[_this.inputs.get().category] instanceof Array;\n        }, _this.isAsync = function (item) {\n            return !!item && [_this.inputs.get().category] && typeof item[_this.inputs.get().category] === \"function\";\n        }, _this.isDisabled = function (item) {\n            var disabledFun = _this.inputs.get().disabled;\n            return disabledFun ? disabledFun(item) : false;\n        }, _this.isDraggable = function (item) {\n            return item && _this.inputs.get().dragndrop.draggable && (typeof _this.inputs.get().dragndrop.draggable === \"function\" ? _this.inputs.get().dragndrop.draggable(item) : true);\n        }, _this.isDroppable = function (item) {\n            return _this.inputs.get().dragndrop.droppable && (typeof _this.inputs.get().dragndrop.droppable === \"function\" ? _this.inputs.get().dragndrop.droppable(item) : true);\n        }, _this.mixCss = function (prop) {\n            return _this.inputs.get().css[prop] || __WEBPACK_IMPORTED_MODULE_3__defaults__[\"a\" /* defaults */].css[prop];\n        }, _this.ulCss = function () {\n            return __WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"css\"].classes(_defineProperty({}, _this.mixCss(\"depth\") + \"-\" + (_this.inputs.get().depth || 0), true));\n        }, _this.liCss = function (item) {\n            var _css$classes2;\n\n            return __WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"css\"].classes((_css$classes2 = {}, _defineProperty(_css$classes2, _this.mixCss(\"selected\"), _this.isSelected(item)), _defineProperty(_css$classes2, _this.mixCss(\"category\"), _this.hasChildren(item) || _this.isAsync(item)), _defineProperty(_css$classes2, _this.mixCss(\"folded\"), _this.hasChildren(item) || _this.isAsync(item) ? _this.isFolded(item) : null), _defineProperty(_css$classes2, _this.mixCss(\"disabled\"), _this.isDisabled(item)), _defineProperty(_css$classes2, _this.mixCss(\"async\"), _this.isAsync(item) && _this.isFolded(item)), _defineProperty(_css$classes2, _this.mixCss(\"loading\"), _this.isAsync(item) && !_this.isFolded(item)), _css$classes2));\n        }, _this.pending = [], _this.unwrapPromise = function (item) {\n            _this.pending.push(item);\n            var asyncFun = _this.inputs.get().async;\n            if (!asyncFun) return Promise.reject(new Error(\"Missing async function.\"));else return asyncFun(item[_this.inputs.get().category]).then(function (res) {\n                item[_this.inputs.get().category] = res;\n                _this.refresh();\n            }).catch(function (err) {\n                /* eslint-disable */\n                throw err;\n                /* eslint-enable */\n            }).then(function () {\n                return _this.pending = _this.pending.filter(function (e) {\n                    return e !== item;\n                });\n            });\n        }, _this.onClick = function (item) {\n            return function (event) {\n                if (_this.isDisabled(item)) return;\n                var strats = _this.inputs.get().strategies;\n                (strats && strats.click || []).map(function (strat) {\n                    return (__WEBPACK_IMPORTED_MODULE_2__strategies__[\"a\" /* clickStrategies */][strat] || strat).bind(_this);\n                }).forEach(function (strat) {\n                    return strat(item, event, _this.inputs.get().ancestors, _this.inputs.get().model);\n                });\n                _this.inputs.get().onSelect(item, _this.inputs.get().ancestors, _this.inputs.get().model);\n                event.stopPropagation();\n            };\n        }, _this.getDragEvents = function (item) {\n            var condition = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n\n            if (!condition) return {};\n            var result = {\n                draggable: _this.isDraggable(item),\n                onDragStart: _this.isDraggable(item) && __WEBPACK_IMPORTED_MODULE_1__dragndrop__[\"b\" /* nodeEvents */].onDragStart(item).bind(_this),\n                onDragOver: _this.isDroppable(item) && __WEBPACK_IMPORTED_MODULE_1__dragndrop__[\"b\" /* nodeEvents */].onDragOver(item).bind(_this),\n                onDragEnter: _this.isDroppable(item) && __WEBPACK_IMPORTED_MODULE_1__dragndrop__[\"b\" /* nodeEvents */].onDragEnter(item).bind(_this),\n                onDragLeave: _this.isDroppable(item) && __WEBPACK_IMPORTED_MODULE_1__dragndrop__[\"b\" /* nodeEvents */].onDragLeave(item).bind(_this),\n                onDrop: _this.isDroppable(item) && __WEBPACK_IMPORTED_MODULE_1__dragndrop__[\"b\" /* nodeEvents */].onDrop(item).bind(_this),\n                onDragEnd: _this.isDraggable(item) && __WEBPACK_IMPORTED_MODULE_1__dragndrop__[\"b\" /* nodeEvents */].onDragEnd(item).bind(_this)\n            };\n            for (var _key2 in result) {\n                if (!result[_key2]) delete result[_key2];\n            }return result;\n        }, _temp), _possibleConstructorReturn(_this, _ret);\n    }\n\n    /* Various checks */\n\n    /* Styles calculation */\n\n    // Css mixin helper\n\n\n    /* Promises */\n\n    // Pending promises\n\n\n    // Unwrap a promise and mutate the model to add the results\n\n\n    /* Events */\n\n    // On item click\n\n\n    _createClass(TreeNode, [{\n        key: \"onOpener\",\n\n\n        // On opener click\n        value: function onOpener(item) {\n            var _this2 = this;\n\n            return function (event) {\n                var newVal = _this2.state.get().unfolded.filter(function (i) {\n                    return i !== item;\n                });\n                if (newVal.length === _this2.state.get().unfolded.length) newVal.push(item);\n                _this2.state.set({ unfolded: newVal });\n                event.stopPropagation();\n            };\n        }\n\n        // Drag'n'drop //\n\n    }]);\n\n    return TreeNode;\n}(Core);\n\n// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //\n// Root node of the tree\n\nvar RootNode = function (_Core2) {\n    _inherits(RootNode, _Core2);\n\n    function RootNode() {\n        var _ref2;\n\n        var _temp2, _this3, _ret2;\n\n        _classCallCheck(this, RootNode);\n\n        for (var _len2 = arguments.length, args = Array(_len2), _key3 = 0; _key3 < _len2; _key3++) {\n            args[_key3] = arguments[_key3];\n        }\n\n        return _ret2 = (_temp2 = (_this3 = _possibleConstructorReturn(this, (_ref2 = RootNode.__proto__ || Object.getPrototypeOf(RootNode)).call.apply(_ref2, [this].concat(args))), _this3), _this3.modifiers = {}, _this3.onKey = function (event) {\n            _this3.modifiers = {\n                control: event.getModifierState(\"Control\"),\n                meta: event.getModifierState(\"Meta\"),\n                shift: event.getModifierState(\"Shift\")\n            };\n        }, _this3.onSelect = function (item, ancestors, neighbours) {\n            var selectionStrategy = _this3.inputs.get().strategies.selection || [];\n            var newSelection = selectionStrategy.map(function (strat) {\n                return (__WEBPACK_IMPORTED_MODULE_2__strategies__[\"c\" /* selectionStrategies */][strat] || strat).bind(_this3);\n            }).reduce(function (last, curr) {\n                return curr(item, last, neighbours, ancestors);\n            }, _this3.inputs.get().selection);\n            _this3.outputs.onSelect(newSelection, item, ancestors, neighbours);\n            return newSelection;\n        }, _this3.wrapDragNDrop = __WEBPACK_IMPORTED_MODULE_1__dragndrop__[\"d\" /* wrapEvents */].bind(_this3), _this3.mixCss = function (prop) {\n            return _this3.inputs.get().css[prop] || __WEBPACK_IMPORTED_MODULE_3__defaults__[\"a\" /* defaults */].css[prop];\n        }, _this3.filterTree = function (input) {\n            var search = _this3.inputs.get().search;\n            return !search ? null : !input.trim() ? null : Object(__WEBPACK_IMPORTED_MODULE_0__bosket_tools__[\"tree\"])(_this3.inputs.get().model, _this3.inputs.get().category).treeFilter(search(input.trim()));\n        }, _temp2), _possibleConstructorReturn(_this3, _ret2);\n    }\n\n    /* Events */\n\n    // Keyboard modifiers list\n\n\n    // When new element(s) are selected\n\n\n    // Framework input wrapper\n\n\n    // Css mixin helper\n\n\n    // Used to filter the tree when performing a search\n\n\n    return RootNode;\n}(Core);\n\n/***/ })\n/******/ ]);\n});\n\n\n// WEBPACK FOOTER //\n// core/bundle/core.umd.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 18);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 77f8ff61b5a73899a1fd","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"commonjs\":\"@bosket/tools\",\"commonjs2\":\"@bosket/tools\",\"amd\":\"@bosket/tools\",\"root\":\"bosket-tools\"}\n// module id = 0\n// module chunks = 0 1 3 5","// @flow\n\nimport { css, array, tree } from \"@bosket/tools\"\n\n// Drag and drop presets //\n\nexport const dragndrop = {\n    // Moves the selection //\n    selection: (model: void => Object[], cb: Object[] => void) => ({\n        draggable: true,\n        droppable: true,\n        drag: (item: Object, event: DragEvent, inputs: Object) => {\n            event.dataTransfer && event.dataTransfer.setData(\"application/json\", JSON.stringify(inputs.selection))\n        },\n        guard: (target: ?Object, event: DragEvent, inputs: Object) => {\n            // Other data types\n            if(event && event.dataTransfer && event.dataTransfer.types.indexOf(\"application/json\") < 0)\n                return false\n            // Prevent drop on self\n            const selfDrop = () => target && array(inputs.selection).contains(target)\n            // Prevent drop on child\n            const childDrop = () => inputs.ancestors &&\n                    inputs.ancestors.reduce((prev, curr) =>\n                        prev || array(inputs.selection).contains(curr), false)\n\n            return selfDrop() || childDrop()\n        },\n        drop: (target: ?Object, event: DragEvent, inputs: Object) => {\n            let updatedModel = tree(model(), inputs.category).filter(e => inputs.selection.indexOf(e) < 0)\n            const adjustedTarget =\n                target ?\n                    target[inputs.category] && target[inputs.category] instanceof Array ?\n                        target :\n                        array(inputs.ancestors).last() :\n                    null\n            if(adjustedTarget)\n                adjustedTarget[inputs.category] = [ ...adjustedTarget[inputs.category], ...inputs.selection ]\n            else\n                updatedModel = [ ...updatedModel, ...inputs.selection ]\n            cb(updatedModel)\n        }\n    }),\n    // Plucks an item on drag\n    pluck: (model: void => Object[], cb: Object[] => void) => ({\n        draggable: true,\n        backup: [],\n        drag: (item: Object, event: DragEvent, inputs: Object) => {\n            bak = JSON.stringify(model())\n            event.dataTransfer && event.dataTransfer.setData(\"application/json\", JSON.stringify(item))\n            setTimeout(() => cb(tree(model(), inputs.category).filter(e => e !== item)), 20)\n        },\n        cancel: () => {\n            cb(JSON.parse(bak))\n        }\n    }),\n    // Pastes item(s) on drop\n    paste: (model: void => Object[], cb: Object[] => void) => ({\n        droppable: true,\n        drop: (target: Object, event: DragEvent, inputs: Object) => {\n            if(event.dataTransfer && event.dataTransfer.types.indexOf(\"application/json\") > -1) {\n                const data = JSON.parse(event.dataTransfer.getData(\"application/json\"))\n                let updatedModel = [...model()]\n                const adjustedTarget =\n                    target ?\n                        target[inputs.category] && target[inputs.category] instanceof Array ?\n                            target :\n                            array(inputs.ancestors).last() :\n                        null\n                if(adjustedTarget)\n                    adjustedTarget[inputs.category] = [ ...adjustedTarget[inputs.category], data ]\n                else\n                    updatedModel = [ ...updatedModel, data ]\n                cb(updatedModel)\n            }\n        }\n    })\n}\nlet bak = \"[]\"\n\n// Utils\n\nexport const utils = {\n    // Returns a list of local files/folders dropped\n    filesystem: (event: DragEvent) => {\n        const items = event.dataTransfer ? event.dataTransfer.items : null\n        if(items && items.length > 0 && items[0].kind === \"file\") {\n            const files = []\n            for(let i = 0; i < items.length; i++) {\n                /* eslint-disable */\n                const item = (items[i] : any).webkitGetAsEntry() || items[i].getAsFile()\n                /* eslint-enable */\n                if(item) {\n                    files.push(item)\n                }\n            }\n            return files\n        }\n        return null\n    }\n}\n\n// Internal use //\n\nconst hoverReferences = {\n    itemRef: undefined,\n    guardCheck: false\n}\nexport const nodeEvents = {\n    onDragStart: function(item: ?Object) {\n        return function(event: DragEvent) {\n            event.stopPropagation()\n            this.inputs.get().dragndrop.onDrag(item, event, this.inputs.get())\n        }\n    },\n    onDragOver: function(item: ?Object) {\n        return function(event: DragEvent) {\n            event.preventDefault()\n            event.stopPropagation()\n\n            const guardCheck =\n                hoverReferences.itemRef === item ? hoverReferences.guardCheck :\n                    this.inputs.get().dragndrop.guard &&\n                    this.inputs.get().dragndrop.guard(item, event, this.inputs.get())\n\n            if(guardCheck) {\n                if(event.dataTransfer) event.dataTransfer.dropEffect = \"none\"\n                css.addClass(event.currentTarget, this.mixCss(\"nodrop\"))\n            } else {\n                if(event.dataTransfer) event.dataTransfer.dropEffect = \"copy\"\n                css.addClass(event.currentTarget, this.mixCss(\"dragover\"))\n            }\n\n            hoverReferences.itemRef = item\n            hoverReferences.guardCheck = guardCheck\n\n            this.inputs.get().dragndrop.onOver(item, event, this.inputs.get())\n        }\n    },\n    onDragEnter: function(item: ?Object) {\n        return function(event: DragEvent) {\n            event.preventDefault()\n            event.stopPropagation()\n            // If dragging over an opener\n            if(item && (this.hasChildren(item) || this.isAsync(item)) && css.hasClass(event.target, this.mixCss(\"opener\"))) {\n                const newVal = this.state.get().unfolded.filter(i => i !== item)\n                newVal.push(item)\n                this.state.set({ unfolded: newVal })\n            }\n\n            this.inputs.get().dragndrop.onEnter(item, event, this.inputs.get())\n        }\n    },\n    onDragLeave:  function(item: ?Object) {\n        return function(event: DragEvent) {\n            event.stopPropagation()\n            css.removeClass(event.currentTarget, this.mixCss(\"dragover\"))\n            css.removeClass(event.currentTarget, this.mixCss(\"nodrop\"))\n\n            this.inputs.get().dragndrop.onLeave(item, event, this.inputs.get())\n        }\n    },\n    onDrop: function(item: ?Object) {\n        return function(event: DragEvent) {\n            event.stopPropagation()\n            css.removeClass(event.currentTarget, this.mixCss(\"dragover\"))\n            css.removeClass(event.currentTarget, this.mixCss(\"nodrop\"))\n            if(!this.inputs.get().dragndrop.guard || !this.inputs.get().dragndrop.guard(item, event, this.inputs.get())) {\n                this.inputs.get().dragndrop.onDrop(item, event, this.inputs.get())\n            }\n        }\n    },\n    onDragEnd: function(item: ?Object) {\n        return function(event: DragEvent) {\n            event.stopPropagation()\n            if(event.dataTransfer && event.dataTransfer.dropEffect === \"none\")\n                this.inputs.get().dragndrop.onCancel(item, event, this.inputs.get())\n        }\n    }\n}\n\nexport const wrapEvents = function() {\n    return {\n        ...this.inputs.get().dragndrop,\n        onDrag: (target: Object, event: DragEvent, inputs: Object) => {\n            if(!array(this.inputs.get().selection).contains(target)) {\n                this.onSelect(target, inputs.ancestors, inputs.neighbours)\n            }\n\n            this.outputs.onDrag && this.outputs.onDrag(target, event, inputs)\n        },\n        onOver: (target: Object, event: DragEvent, inputs: Object) => {\n            this.outputs.onOver && this.outputs.onOver(target, event, inputs)\n        },\n        onEnter: (target: Object, event: DragEvent, inputs: Object) => {\n            this.outputs.onEnter && this.outputs.onEnter(target, event, inputs)\n        },\n        onLeave: (target: Object, event: DragEvent, inputs: Object) => {\n            this.outputs.onLeave && this.outputs.onLeave(target, event, inputs)\n        },\n        onDrop: (target: Object, event: DragEvent, inputs: Object) => {\n            event.preventDefault()\n            this.outputs.onDrop && this.outputs.onDrop(target, event, inputs)\n        },\n        onCancel: (target: Object, event: DragEvent, inputs: Object) => {\n            event.preventDefault()\n            if(event.dataTransfer && event.dataTransfer.dropEffect === \"none\")\n                this.outputs.onCancel && this.outputs.onCancel(target, event, inputs)\n        }\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/dragndrop.js","// @flow\n\nimport { array, tree } from \"@bosket/tools\"\n\ntype selectionStrategy = (item: Object, selection: Object[], neighbours: Object[], ancestors: Object[]) => Object[]\ntype clickStrategy = (item: Object, event: MouseEvent, ancestors: Array<Object>, neighbours: Array<Object>) => void\ntype foldStrategy = (item: Object, folded: boolean) => boolean\n\nconst singleSelect : selectionStrategy = function(item, selection, neighbours, ancestors) {\n    return array(selection).contains(item) ? [] : [item]\n}\nconst multiSelect : selectionStrategy = function(item, selection, neighbours, ancestors) {\n    let alreadySelected = false\n    let newSelection = selection.filter(i => {\n        // Mark if the item was already selected\n        if(!alreadySelected) alreadySelected = i === item\n        // Deselect all ancestors\n        return i !== item && ancestors.indexOf(i) < 0\n    })\n    // Categories : deselect all children\n    if(!alreadySelected && item[this.inputs.get().category] && item[this.inputs.get().category] instanceof Array) {\n        tree(item[this.inputs.get().category], this.inputs.get().category).visit((children: any) => {\n            newSelection = array(newSelection).notIn(children)\n        })\n    }\n    if(!alreadySelected) newSelection.push(item)\n    return newSelection\n}\n\n// Selection strategies are triggered when the selection is updated.\nexport const selectionStrategies : { [key: string] : selectionStrategy } = {\n    // The single strategy allows only one selected item at the same time (usually the last item clicked).\n    single: singleSelect,\n    // The multiple strategy allows any number of selected items and will add the last item clicked to the selection list.\n    multiple: multiSelect,\n    /*\n    The modifiers strategy is the way most file explorers behave.\n    Without keyboard modifiers, only one selected item is allowed.\n    While pressing the shift key, all items between the two last selected siblings are added to the selection array.\n    While pressing the ctrl (or cmd for mac users) key, the item is added to the selection list.\n     */\n    modifiers: function(item, selection, neighbours, ancestors) {\n        if(this.modifiers.control || this.modifiers.meta) {\n            this.lastSelection = item\n            delete this.lastIndex\n            delete this.lastPivot\n            return multiSelect.bind(this)(item, selection, neighbours, ancestors)\n        } else if(this.modifiers.shift) {\n            if(!this.lastSelection)\n                return selection\n\n            const originIndex = neighbours.indexOf(this.lastSelection)\n            if(originIndex < 0)\n                return selection\n\n            let newSelection = selection.slice()\n            const endIndex = neighbours.indexOf(item)\n\n            if(originIndex >= 0) {\n                if(this.lastPivot) {\n                    const lastIndex = neighbours.indexOf(this.lastPivot)\n                    const [ smaller, higher ] = originIndex > lastIndex ?\n                        [ lastIndex, originIndex ] :\n                        [ originIndex, lastIndex ]\n                    const deletions : any = neighbours.slice(smaller, higher + 1)\n                    newSelection = array(newSelection).notIn(deletions)\n                }\n                this.lastPivot = item\n\n                const [ smaller, higher ] = originIndex > endIndex ?\n                    [ endIndex, originIndex ] :\n                    [ originIndex, endIndex ]\n                const additions : any = !this.inputs.get().disabled ?\n                    neighbours.slice(smaller, higher + 1) :\n                    neighbours.slice(smaller, higher + 1).filter(i => !this.inputs.get().disabled(i))\n                newSelection = array(newSelection).notIn(additions)\n                newSelection.push(...additions)\n            }\n\n            return newSelection\n        } else {\n            this.lastSelection = item\n            delete this.lastIndex\n            delete this.lastPivot\n            return singleSelect.bind(this)(item, selection.length > 1 ? [] : selection, neighbours, ancestors)\n        }\n    },\n    // Selects an item and its ancestors.\n    ancestors: function(item, selection, neighbours, ancestors) {\n        return selection.length === 0 ?\n            [item] :\n            array(selection).contains(item) ?\n                [...ancestors] :\n                [ ...ancestors, item ]\n    }\n}\n\n// Click strategies are triggered on item click\nexport const clickStrategies : { [key: string] : clickStrategy } = {\n    // Unfold an item when selecting it. Pair it with the \"opener-control\" fold strategy.\n    \"unfold-on-selection\": function(item) {\n        if(!this.isSelected(item)) {\n            const newUnfolded = this.state.get().unfolded.filter(i => i !== item)\n            newUnfolded.push(item)\n            this.state.set({ unfolded: newUnfolded })\n        }\n    },\n    // Toggle fold/unfold. Pair it with the \"opener-control\" fold strategy.\n    \"toggle-fold\": function(item) {\n        const newUnfolded = this.state.get().unfolded.filter(i => i !== item)\n        if(newUnfolded.length === this.state.get().unfolded.length) {\n            newUnfolded.push(item)\n        }\n        this.state.set({ unfolded: newUnfolded })\n    }\n}\n\n// Fold strategies determine if an item will be folded or not, meaning if its children are hidden.\nexport const foldStrategies : { [key: string] : foldStrategy } = {\n    // Allow the opener (usually an arrow-like element) to control the fold state.\n    \"opener-control\": function(item) {\n        return !array(this.state.get().unfolded).contains(item)\n    },\n    // Fold when not selected.\n    \"not-selected\": function(item) {\n        return !this.isSelected(item)\n    },\n    // Unfold as long as there is at least one child selected.\n    \"no-child-selection\": function(item) {\n        // naive algorithm ...\n        const recurseCheck = node =>\n            this.isSelected(node) ||\n            node[this.inputs.get().category] &&\n            node[this.inputs.get().category] instanceof Array &&\n            node[this.inputs.get().category].some(recurseCheck)\n        return !recurseCheck(item)\n    },\n    // Fold every item deeper than then \"max-depth\" component property.\n    \"max-depth\": function() {\n        return this.inputs.get().maxDepth && !isNaN(parseInt(this.inputs.get().maxDepth, 10)) ?\n            this.inputs.get().depth >= parseInt(this.inputs.get().maxDepth, 10) :\n            false\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/strategies.js","// @flow\n\nexport const defaults = {\n    labels: {\n        \"search.placeholder\": \"Search ...\"\n    },\n    css: {\n        TreeView:           \"TreeView\",\n        opener:             \"opener\",\n        depth:              \"depth\",\n        selected:           \"selected\",\n        category:           \"category\",\n        folded:             \"folded\",\n        disabled:           \"disabled\",\n        async:              \"async\",\n        loading:            \"loading\",\n        nodrop:             \"nodrop\",\n        dragover:           \"dragover\",\n        search:             \"search\",\n        item:               \"item\"\n    },\n    strategies: {\n        selection: [\"single\"],\n        click: [],\n        fold: [ \"not-selected\", \"no-child-selection\" ]\n    },\n    display: (_: Object) => _.toString(),\n    async: (_: Function) => _(),\n    noOpener: false,\n    dragndrop: {\n        draggable: false,\n        droppable: false\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/core/defaults.js","// @flow\n\nimport { css, array, tree } from \"@bosket/tools\"\nimport { wrapEvents, nodeEvents } from \"./dragndrop\"\nimport { selectionStrategies, foldStrategies, clickStrategies } from \"./strategies\"\nimport { defaults } from \"./defaults\"\n\n// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //\n//  Boilerplate  for framework class adapters\n\nclass Core<Input: Object> {\n    inputs: { get: () => Input }\n    outputs: Object\n    state: { get: () => Object, set: Object => void }\n    refresh: () => void\n\n    constructor(inputs: { get: () => Input }, outputs: Object, state: { get: () => Object, set: Object => void }, refresh: () => void) {\n        this.inputs = inputs\n        this.outputs = outputs\n        this.state = state\n        this.refresh = refresh\n    }\n\n}\n\n// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //\n// Tree node\n\nexport type TreeNodeInput = {\n    model:              Object[],\n    category:           string,\n    selection:          Object[],\n    onSelect:           (item: Object, ancestors: Object[], neighbours: Object[]) => void,\n    ancestors:          Object[],\n    strategies?:        Object,\n    disabled?:          Object => boolean,\n    dragndrop:          Object,\n    css:                { [key: string]: string },\n    async?:             (mixed => Promise<Object[]>) => Promise<Object[]>,\n    depth?:             number\n}\n\nexport class TreeNode extends Core<*> {\n\n    /* Various checks */\n\n    isSelected = (item: Object) => array(this.inputs.get().selection).contains(item)\n    isFolded = (item: Object) : boolean => {\n        const strats = this.inputs.get().strategies\n        return  (!this.inputs.get().searched || this.isAsync(item)) &&\n                    (strats && strats.fold || [])\n                        .map(strat => (foldStrategies[strat] || strat).bind(this))\n                        .reduce((last, curr) => last && curr(item, last), true)\n    }\n    hasChildren = (item: Object) => item[this.inputs.get().category] && item[this.inputs.get().category] instanceof Array\n    isAsync = (item: ?Object) : boolean => !!item && [this.inputs.get().category] && typeof item[this.inputs.get().category] === \"function\"\n    isDisabled = (item: Object) => {\n        const disabledFun = this.inputs.get().disabled\n        return disabledFun ? disabledFun(item) : false\n    }\n    isDraggable = (item: ?Object) =>\n        item &&\n        this.inputs.get().dragndrop.draggable && (\n            typeof this.inputs.get().dragndrop.draggable === \"function\" ?\n                this.inputs.get().dragndrop.draggable(item) :\n                true\n        )\n    isDroppable = (item: ?Object) =>\n        this.inputs.get().dragndrop.droppable && (\n            typeof this.inputs.get().dragndrop.droppable === \"function\" ?\n                this.inputs.get().dragndrop.droppable(item) :\n                true\n        )\n\n    /* Styles calculation */\n\n    // Css mixin helper\n    mixCss = (prop: string) => this.inputs.get().css[prop] || defaults.css[prop]\n\n    ulCss = () =>\n        css.classes({\n            [`${this.mixCss(\"depth\")}-${this.inputs.get().depth || 0}`]: true\n        })\n\n    liCss = (item: Object) =>\n        css.classes({\n            [this.mixCss(\"selected\")]:  this.isSelected(item),\n            [this.mixCss(\"category\")]:  this.hasChildren(item) || this.isAsync(item),\n            [this.mixCss(\"folded\")]:    this.hasChildren(item) || this.isAsync(item) ? this.isFolded(item) : null,\n            [this.mixCss(\"disabled\")]:  this.isDisabled(item),\n            [this.mixCss(\"async\")]:     this.isAsync(item) && this.isFolded(item),\n            [this.mixCss(\"loading\")]:   this.isAsync(item) && !this.isFolded(item)\n        })\n\n    /* Promises */\n\n    // Pending promises\n    pending = []\n\n    // Unwrap a promise and mutate the model to add the results\n    unwrapPromise = (item: Object) : Promise<mixed> => {\n        this.pending.push(item)\n        const asyncFun = this.inputs.get().async\n        if(!asyncFun)\n            return Promise.reject(new Error(\"Missing async function.\"))\n        else\n            return asyncFun(item[this.inputs.get().category])\n                .then(res => {\n                    item[this.inputs.get().category] = res\n                    this.refresh()\n                })\n                .catch(err => {\n                    /* eslint-disable */\n                    throw err\n                    /* eslint-enable */\n                })\n                .then(() => this.pending = this.pending.filter(e => e !== item))\n    }\n\n    /* Events */\n\n    // On item click\n    onClick = (item: Object) =>\n        (event: MouseEvent) => {\n            if(this.isDisabled(item))\n                return\n            const strats = this.inputs.get().strategies;\n            (strats && strats.click || [])\n                .map(strat => (clickStrategies[strat] || strat).bind(this))\n                .forEach(strat => strat(item, event, this.inputs.get().ancestors, this.inputs.get().model))\n            this.inputs.get().onSelect(item, this.inputs.get().ancestors, this.inputs.get().model)\n            event.stopPropagation()\n        }\n\n    // On opener click\n    onOpener(item: Object) {\n        return (event: MouseEvent) => {\n            const newVal = this.state.get().unfolded.filter(i => i !== item)\n            if(newVal.length === this.state.get().unfolded.length)\n                newVal.push(item)\n            this.state.set({ unfolded: newVal })\n            event.stopPropagation()\n        }\n    }\n\n    // Drag'n'drop //\n\n    getDragEvents = (item: ?Object, condition?: boolean = true) => {\n        if(!condition) return {}\n        const result = {\n            draggable:      this.isDraggable(item),\n            onDragStart:    this.isDraggable(item) && nodeEvents.onDragStart(item).bind(this),\n            onDragOver:     this.isDroppable(item) && nodeEvents.onDragOver(item).bind(this),\n            onDragEnter:    this.isDroppable(item) && nodeEvents.onDragEnter(item).bind(this),\n            onDragLeave:    this.isDroppable(item) && nodeEvents.onDragLeave(item).bind(this),\n            onDrop:         this.isDroppable(item) && nodeEvents.onDrop(item).bind(this),\n            onDragEnd:      this.isDraggable(item) && nodeEvents.onDragEnd(item).bind(this)\n        }\n        for(const key in result)\n            if(!result[key])\n                delete result[key]\n        return result\n    }\n\n}\n\n// * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * //\n// Root node of the tree\n\nexport type RootNodeInput = {\n    model:              Object[],\n    category:           string,\n    selection:          Object[],\n    strategies:         Object,\n    css:                { [key: string]: string },\n    dragndrop?:         Object,\n    search?:            string => Object => boolean\n}\n\nexport class RootNode extends Core<*> {\n\n    /* Events */\n\n    // Keyboard modifiers list\n    modifiers = {}\n    onKey = (event: KeyboardEvent) => {\n        this.modifiers = {\n            control: event.getModifierState(\"Control\"),\n            meta: event.getModifierState(\"Meta\"),\n            shift: event.getModifierState(\"Shift\")\n        }\n    }\n\n    // When new element(s) are selected\n    onSelect = (item: Object, ancestors: Object[], neighbours: Object[]) => {\n        const selectionStrategy = this.inputs.get().strategies.selection || []\n        const newSelection = selectionStrategy\n            .map(strat => (selectionStrategies[strat] || strat).bind(this))\n            .reduce((last, curr) => curr(item, last, neighbours, ancestors), this.inputs.get().selection)\n        this.outputs.onSelect(newSelection, item, ancestors, neighbours)\n        return newSelection\n    }\n\n    // Framework input wrapper\n    wrapDragNDrop = wrapEvents.bind(this)\n\n    // Css mixin helper\n    mixCss = (prop: string) => this.inputs.get().css[prop] || defaults.css[prop]\n\n    // Used to filter the tree when performing a search\n    filterTree = (input: string) => {\n        const search = this.inputs.get().search\n        return !search ? null : !input.trim() ? null :\n            tree(this.inputs.get().model, this.inputs.get().category)\n                .treeFilter(search(input.trim()))\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/core/logic.js"],"sourceRoot":""}